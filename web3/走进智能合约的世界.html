<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.0" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.0" />
    <style>
      html {
        background: var(--bg-color, #fff);
      }

      html[data-theme="dark"] {
        background: var(--bg-color, #1d1e1f);
      }

      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <title>走进智能合约的世界</title><meta name="description" content="">
    <link rel="preload" href="/assets/style-oozhY2Av.css" as="style"><link rel="stylesheet" href="/assets/style-oozhY2Av.css">
    <link rel="modulepreload" href="/assets/app-cbOojWoE.js"><link rel="modulepreload" href="/assets/走进智能合约的世界.html-C2occO0h.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper-x3n3nnut.js"><link rel="modulepreload" href="/assets/走进智能合约的世界.html-1gJju38x.js">
    <link rel="prefetch" href="/assets/index.html-C2sHOaA4.js" as="script"><link rel="prefetch" href="/assets/index.html-GyjAIdzt.js" as="script"><link rel="prefetch" href="/assets/immer.html-ahZLfDZ9.js" as="script"><link rel="prefetch" href="/assets/react性能优化.html-iMQkg9Zt.js" as="script"><link rel="prefetch" href="/assets/index.html-Ipy16phr.js" as="script"><link rel="prefetch" href="/assets/vue2原理.html-Z38p-ohi.js" as="script"><link rel="prefetch" href="/assets/index.html-wpJsDm7d.js" as="script"><link rel="prefetch" href="/assets/truffle.html-ba6ORfe2.js" as="script"><link rel="prefetch" href="/assets/index.html-XS055sgS.js" as="script"><link rel="prefetch" href="/assets/CSR vs SSR.html-gCGJYWDy.js" as="script"><link rel="prefetch" href="/assets/index.html-IW7SvAqH.js" as="script"><link rel="prefetch" href="/assets/函数式编程.html-Lnvd5mgi.js" as="script"><link rel="prefetch" href="/assets/单元测试.html--mv88kiG.js" as="script"><link rel="prefetch" href="/assets/状态管理.html-HYcTJUxf.js" as="script"><link rel="prefetch" href="/assets/私仓.html-fpIdZTwQ.js" as="script"><link rel="prefetch" href="/assets/组件库.html-tNj5JpxO.js" as="script"><link rel="prefetch" href="/assets/自定义SSR.html-jLmRDdAy.js" as="script"><link rel="prefetch" href="/assets/排序.html-6J_nvrxC.js" as="script"><link rel="prefetch" href="/assets/webpack核心原理.html-SJDFBAVo.js" as="script"><link rel="prefetch" href="/assets/高频考题.html-gxE4sbUB.js" as="script"><link rel="prefetch" href="/assets/Loader 原理.html-ptxrclYE.js" as="script"><link rel="prefetch" href="/assets/Plugin 原理.html-U_lBMdZU.js" as="script"><link rel="prefetch" href="/assets/Css 处理.html-QeAxs-XI.js" as="script"><link rel="prefetch" href="/assets/html 压缩.html-Cf7cyFg4.js" as="script"><link rel="prefetch" href="/assets/修改输出资源的名称和路径.html-zcF11Oby.js" as="script"><link rel="prefetch" href="/assets/前言.html-GR62KiS6.js" as="script"><link rel="prefetch" href="/assets/基本使用.html-8DrUVPLf.js" as="script"><link rel="prefetch" href="/assets/基本配置.html-4eEhhOdr.js" as="script"><link rel="prefetch" href="/assets/处理 Html 资源.html-WxmbZ3za.js" as="script"><link rel="prefetch" href="/assets/处理 js 资源.html-NF-ijhCe.js" as="script"><link rel="prefetch" href="/assets/处理其他资源.html-y-9JXmN-.js" as="script"><link rel="prefetch" href="/assets/处理图片资源.html-6xkbb9vs.js" as="script"><link rel="prefetch" href="/assets/处理字体图标资源.html-2y1mfogb.js" as="script"><link rel="prefetch" href="/assets/处理样式资源.html-289shFI1.js" as="script"><link rel="prefetch" href="/assets/开发服务器_自动化.html-sMoRwZvK.js" as="script"><link rel="prefetch" href="/assets/开发模式介绍.html-jGJBkgJY.js" as="script"><link rel="prefetch" href="/assets/总结.html-nfdBfcbY.js" as="script"><link rel="prefetch" href="/assets/生产模式介绍.html-DqQPVHwW.js" as="script"><link rel="prefetch" href="/assets/自动清空上次打包资源.html-06wTwUGw.js" as="script"><link rel="prefetch" href="/assets/React 脚手架.html-GwhUoax8.js" as="script"><link rel="prefetch" href="/assets/Vue 脚手架.html-F403P553.js" as="script"><link rel="prefetch" href="/assets/webpack高级部分.html-D1kRnVkg.js" as="script"><link rel="prefetch" href="/assets/介绍.html-Sr_EzSKO.js" as="script"><link rel="prefetch" href="/assets/优化代码运行性能.html-dOgeCMmL.js" as="script"><link rel="prefetch" href="/assets/减少代码体积.html-clvbFbHJ.js" as="script"><link rel="prefetch" href="/assets/总结.html-phEyXv6P.js" as="script"><link rel="prefetch" href="/assets/提升开发体验.html-RoRi8hBs.js" as="script"><link rel="prefetch" href="/assets/提升打包构建速度.html-0NhJr1tH.js" as="script"><link rel="prefetch" href="/assets/1.html--xealN69.js" as="script"><link rel="prefetch" href="/assets/2.html-C1QtM8ka.js" as="script"><link rel="prefetch" href="/assets/3.html-D8C2yOlo.js" as="script"><link rel="prefetch" href="/assets/4.html-8eT5Mbik.js" as="script"><link rel="prefetch" href="/assets/404.html-FzwsIe5I.js" as="script"><link rel="prefetch" href="/assets/index.html-lP6pkZG-.js" as="script"><link rel="prefetch" href="/assets/index.html-tc65a7gy.js" as="script"><link rel="prefetch" href="/assets/index.html-QSpBHtTf.js" as="script"><link rel="prefetch" href="/assets/index.html-W515xrQc.js" as="script"><link rel="prefetch" href="/assets/index.html-K8vVplk6.js" as="script"><link rel="prefetch" href="/assets/index.html-7UPCoQrZ.js" as="script"><link rel="prefetch" href="/assets/index.html-3T5HnAHZ.js" as="script"><link rel="prefetch" href="/assets/index.html-UKjJ7wEK.js" as="script"><link rel="prefetch" href="/assets/index.html-A2HQGHtb.js" as="script"><link rel="prefetch" href="/assets/index.html-FgDmTHdA.js" as="script"><link rel="prefetch" href="/assets/index.html-xc2cYT5m.js" as="script"><link rel="prefetch" href="/assets/immer.html-8OJXgBEP.js" as="script"><link rel="prefetch" href="/assets/react性能优化.html-Mti3Hwig.js" as="script"><link rel="prefetch" href="/assets/index.html-Md901eQA.js" as="script"><link rel="prefetch" href="/assets/vue2原理.html-lJcwf-AV.js" as="script"><link rel="prefetch" href="/assets/index.html-Jph7-HhB.js" as="script"><link rel="prefetch" href="/assets/truffle.html-JlgYTa2W.js" as="script"><link rel="prefetch" href="/assets/index.html-LhmPfLRS.js" as="script"><link rel="prefetch" href="/assets/CSR vs SSR.html-8dAtEECi.js" as="script"><link rel="prefetch" href="/assets/index.html-Pu6d42H7.js" as="script"><link rel="prefetch" href="/assets/函数式编程.html-mkAye8A_.js" as="script"><link rel="prefetch" href="/assets/单元测试.html-WPcTY3E0.js" as="script"><link rel="prefetch" href="/assets/状态管理.html-YaUrd-HC.js" as="script"><link rel="prefetch" href="/assets/私仓.html-E14WmhXd.js" as="script"><link rel="prefetch" href="/assets/组件库.html-UtLwcjom.js" as="script"><link rel="prefetch" href="/assets/自定义SSR.html-QZD4NJQd.js" as="script"><link rel="prefetch" href="/assets/排序.html-J7JViF2W.js" as="script"><link rel="prefetch" href="/assets/webpack核心原理.html-r-RA8hwM.js" as="script"><link rel="prefetch" href="/assets/高频考题.html-WjhmLKwo.js" as="script"><link rel="prefetch" href="/assets/Loader 原理.html-3iHAdB-q.js" as="script"><link rel="prefetch" href="/assets/Plugin 原理.html-aI-kiXHh.js" as="script"><link rel="prefetch" href="/assets/Css 处理.html-zRNrDLsp.js" as="script"><link rel="prefetch" href="/assets/html 压缩.html-n7sMzfB_.js" as="script"><link rel="prefetch" href="/assets/修改输出资源的名称和路径.html-e1QNEWFT.js" as="script"><link rel="prefetch" href="/assets/前言.html-x2oE1Jk4.js" as="script"><link rel="prefetch" href="/assets/基本使用.html-Le6ZOa8p.js" as="script"><link rel="prefetch" href="/assets/基本配置.html-7xiCMY-I.js" as="script"><link rel="prefetch" href="/assets/处理 Html 资源.html-IYXcX995.js" as="script"><link rel="prefetch" href="/assets/处理 js 资源.html-ZZcIbGEd.js" as="script"><link rel="prefetch" href="/assets/处理其他资源.html-KoVgv7kR.js" as="script"><link rel="prefetch" href="/assets/处理图片资源.html-GYfU8efx.js" as="script"><link rel="prefetch" href="/assets/处理字体图标资源.html-_6I-RU9c.js" as="script"><link rel="prefetch" href="/assets/处理样式资源.html-qSErU8vC.js" as="script"><link rel="prefetch" href="/assets/开发服务器_自动化.html-zWVyt8tG.js" as="script"><link rel="prefetch" href="/assets/开发模式介绍.html-7uXRes10.js" as="script"><link rel="prefetch" href="/assets/总结.html-CVh-UW5i.js" as="script"><link rel="prefetch" href="/assets/生产模式介绍.html-7TF9-j3-.js" as="script"><link rel="prefetch" href="/assets/自动清空上次打包资源.html-_oD9P_eB.js" as="script"><link rel="prefetch" href="/assets/React 脚手架.html-ksAE2d2O.js" as="script"><link rel="prefetch" href="/assets/Vue 脚手架.html-HX91h-zl.js" as="script"><link rel="prefetch" href="/assets/webpack高级部分.html-WncLQZ5F.js" as="script"><link rel="prefetch" href="/assets/介绍.html-S5Cj9Qgh.js" as="script"><link rel="prefetch" href="/assets/优化代码运行性能.html-DhFUCRWl.js" as="script"><link rel="prefetch" href="/assets/减少代码体积.html-VIvzYLB1.js" as="script"><link rel="prefetch" href="/assets/总结.html-K396uChV.js" as="script"><link rel="prefetch" href="/assets/提升开发体验.html-aHTxuJaC.js" as="script"><link rel="prefetch" href="/assets/提升打包构建速度.html-2fhgGYu6.js" as="script"><link rel="prefetch" href="/assets/1.html-wpe4Zqfb.js" as="script"><link rel="prefetch" href="/assets/2.html-Cloz8H1d.js" as="script"><link rel="prefetch" href="/assets/3.html-tcau_q4x.js" as="script"><link rel="prefetch" href="/assets/4.html-2PUvl_2a.js" as="script"><link rel="prefetch" href="/assets/404.html-SrWFsHa5.js" as="script"><link rel="prefetch" href="/assets/index.html-4LzPtmmM.js" as="script"><link rel="prefetch" href="/assets/index.html-cx8cLDGh.js" as="script"><link rel="prefetch" href="/assets/index.html-ulojtoMO.js" as="script"><link rel="prefetch" href="/assets/index.html-MyDeYARH.js" as="script"><link rel="prefetch" href="/assets/index.html-NetDf9uh.js" as="script"><link rel="prefetch" href="/assets/index.html-UI3zvmCL.js" as="script"><link rel="prefetch" href="/assets/index.html-ak83M8BU.js" as="script"><link rel="prefetch" href="/assets/index.html-9Gnk8-XT.js" as="script"><link rel="prefetch" href="/assets/index.html-DP7nx-w1.js" as="script"><link rel="prefetch" href="/assets/photoswipe.esm-mC0Qcr12.js" as="script"><link rel="prefetch" href="/assets/SearchResult-KcaME096.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">跳至主要內容</a><!--]--><div class="theme-container has-toc"><!--[--><header id="navbar" class="vp-navbar"><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><!--[--><a class="vp-link vp-brand vp-brand" href="/"><img class="vp-nav-logo" src="/logo.png" alt><!----><!----></a><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-center"><!--[--><!----><!--]--><!--[--><nav class="vp-nav-links"><div class="nav-item hide-in-mobile"><a aria-label="web3" class="vp-link nav-link active nav-link active" href="/web3/"><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span>web3<!----></a></div><div class="nav-item hide-in-mobile"><a aria-label="Webpack" class="vp-link nav-link nav-link" href="/webpack/"><!---->Webpack<!----></a></div><div class="nav-item hide-in-mobile"><a aria-label="vue" class="vp-link nav-link nav-link" href="/vue/"><!---->vue<!----></a></div><div class="nav-item hide-in-mobile"><a aria-label="React" class="vp-link nav-link nav-link" href="/react/"><!---->React<!----></a></div><div class="nav-item hide-in-mobile"><a aria-label="前端架构指南" class="vp-link nav-link nav-link" href="/%E5%89%8D%E7%AB%AF%E6%9E%B6%E6%9E%84%E6%8C%87%E5%8D%97/"><!---->前端架构指南<!----></a></div><div class="nav-item hide-in-mobile"><a aria-label="HTTP" class="vp-link nav-link nav-link" href="/HTTP/"><!---->HTTP<!----></a></div><div class="nav-item hide-in-mobile"><a aria-label="算法" class="vp-link nav-link nav-link" href="/%E7%AE%97%E6%B3%95/"><!---->算法<!----></a></div><div class="nav-item hide-in-mobile"><a aria-label="其他网站" class="vp-link nav-link nav-link" href="/%E5%85%B6%E4%BB%96%E7%BD%91%E7%AB%99/"><!---->其他网站<!----></a></div></nav><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-end"><!--[--><!----><!--]--><!--[--><!----><!----><div class="nav-item hide-in-mobile"><button type="button" id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!--[--><button type="button" class="search-pro-button" role="search" aria-label="搜索"><svg xmlns="http://www.w3.org/2000/svg" class="icon search-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="search icon"><path d="M192 480a256 256 0 1 1 512 0 256 256 0 0 1-512 0m631.776 362.496-143.2-143.168A318.464 318.464 0 0 0 768 480c0-176.736-143.264-320-320-320S128 303.264 128 480s143.264 320 320 320a318.016 318.016 0 0 0 184.16-58.592l146.336 146.368c12.512 12.48 32.768 12.48 45.28 0 12.48-12.512 12.48-32.768 0-45.28"></path></svg><div class="search-pro-placeholder">搜索</div><div class="search-pro-key-hints"><kbd class="search-pro-key">Ctrl</kbd><kbd class="search-pro-key">K</kbd></div></button><!--]--><!--]--><!--[--><!----><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar"><!--[--><!----><!--]--><ul class="vp-sidebar-links"><li><!--[--><a aria-label="web3" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/web3/"><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span>web3<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-label="走进智能合约的世界" class="vp-link nav-link active vp-sidebar-link vp-sidebar-page active nav-link active vp-sidebar-link vp-sidebar-page active" href="/web3/%E8%B5%B0%E8%BF%9B%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%E7%9A%84%E4%B8%96%E7%95%8C.html"><!---->走进智能合约的世界<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-label="solidity学习网站" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/web3/%E8%B5%B0%E8%BF%9B%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%E7%9A%84%E4%B8%96%E7%95%8C.html#solidity学习网站"><!---->solidity学习网站<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="solidity语法" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/web3/%E8%B5%B0%E8%BF%9B%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%E7%9A%84%E4%B8%96%E7%95%8C.html#solidity语法"><!---->solidity语法<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-label="基础部分" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/web3/%E8%B5%B0%E8%BF%9B%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%E7%9A%84%E4%B8%96%E7%95%8C.html#基础部分"><!---->基础部分<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-label="1.hello solidity.sol" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/web3/%E8%B5%B0%E8%BF%9B%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%E7%9A%84%E4%B8%96%E7%95%8C.html#_1-hello-solidity-sol"><!---->1.hello solidity.sol<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="2.数据类型.sol" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/web3/%E8%B5%B0%E8%BF%9B%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%E7%9A%84%E4%B8%96%E7%95%8C.html#_2-数据类型-sol"><!---->2.数据类型.sol<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="3.状态变量.sol" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/web3/%E8%B5%B0%E8%BF%9B%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%E7%9A%84%E4%B8%96%E7%95%8C.html#_3-状态变量-sol"><!---->3.状态变量.sol<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="4.全局变量.sol" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/web3/%E8%B5%B0%E8%BF%9B%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%E7%9A%84%E4%B8%96%E7%95%8C.html#_4-全局变量-sol"><!---->4.全局变量.sol<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="5.函数和函数修饰符.sol" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/web3/%E8%B5%B0%E8%BF%9B%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%E7%9A%84%E4%B8%96%E7%95%8C.html#_5-函数和函数修饰符-sol"><!---->5.函数和函数修饰符.sol<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="5-1.修饰符.sol" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/web3/%E8%B5%B0%E8%BF%9B%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%E7%9A%84%E4%B8%96%E7%95%8C.html#_5-1-修饰符-sol"><!---->5-1.修饰符.sol<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="6.数组.sol" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/web3/%E8%B5%B0%E8%BF%9B%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%E7%9A%84%E4%B8%96%E7%95%8C.html#_6-数组-sol"><!---->6.数组.sol<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="7.mapping.sol" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/web3/%E8%B5%B0%E8%BF%9B%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%E7%9A%84%E4%B8%96%E7%95%8C.html#_7-mapping-sol"><!---->7.mapping.sol<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="8.自定义结构.sol" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/web3/%E8%B5%B0%E8%BF%9B%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%E7%9A%84%E4%B8%96%E7%95%8C.html#_8-自定义结构-sol"><!---->8.自定义结构.sol<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="9.事物控制与异常.sol" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/web3/%E8%B5%B0%E8%BF%9B%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%E7%9A%84%E4%B8%96%E7%95%8C.html#_9-事物控制与异常-sol"><!---->9.事物控制与异常.sol<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="10.自定义修饰符.sol" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/web3/%E8%B5%B0%E8%BF%9B%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%E7%9A%84%E4%B8%96%E7%95%8C.html#_10-自定义修饰符-sol"><!---->10.自定义修饰符.sol<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="11.storage与memory.sol" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/web3/%E8%B5%B0%E8%BF%9B%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%E7%9A%84%E4%B8%96%E7%95%8C.html#_11-storage与memory-sol"><!---->11.storage与memory.sol<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="12.pure和if等.sol" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/web3/%E8%B5%B0%E8%BF%9B%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%E7%9A%84%E4%B8%96%E7%95%8C.html#_12-pure和if等-sol"><!---->12.pure和if等.sol<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="13.interface.sol" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/web3/%E8%B5%B0%E8%BF%9B%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%E7%9A%84%E4%B8%96%E7%95%8C.html#_13-interface-sol"><!---->13.interface.sol<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="14.payable.sol" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/web3/%E8%B5%B0%E8%BF%9B%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%E7%9A%84%E4%B8%96%E7%95%8C.html#_14-payable-sol"><!---->14.payable.sol<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="15.事件.sol" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/web3/%E8%B5%B0%E8%BF%9B%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%E7%9A%84%E4%B8%96%E7%95%8C.html#_15-事件-sol"><!---->15.事件.sol<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="16.other.sol" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/web3/%E8%B5%B0%E8%BF%9B%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%E7%9A%84%E4%B8%96%E7%95%8C.html#_16-other-sol"><!---->16.other.sol<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a aria-label="提升部分" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/web3/%E8%B5%B0%E8%BF%9B%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%E7%9A%84%E4%B8%96%E7%95%8C.html#提升部分"><!---->提升部分<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-label="1.函数的重载.sol" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/web3/%E8%B5%B0%E8%BF%9B%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%E7%9A%84%E4%B8%96%E7%95%8C.html#_1-函数的重载-sol"><!---->1.函数的重载.sol<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="2.库合约.sol" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/web3/%E8%B5%B0%E8%BF%9B%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%E7%9A%84%E4%B8%96%E7%95%8C.html#_2-库合约-sol"><!---->2.库合约.sol<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="3.import.sol" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/web3/%E8%B5%B0%E8%BF%9B%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%E7%9A%84%E4%B8%96%E7%95%8C.html#_3-import-sol"><!---->3.import.sol<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="4.调用合约" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/web3/%E8%B5%B0%E8%BF%9B%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%E7%9A%84%E4%B8%96%E7%95%8C.html#_4-调用合约"><!---->4.调用合约<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-label="Yideng.sol" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/web3/%E8%B5%B0%E8%BF%9B%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%E7%9A%84%E4%B8%96%E7%95%8C.html#yideng-sol"><!---->Yideng.sol<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="4-1.new调用.sol" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/web3/%E8%B5%B0%E8%BF%9B%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%E7%9A%84%E4%B8%96%E7%95%8C.html#_4-1-new调用-sol"><!---->4-1.new调用.sol<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="4-2.继承调用.sol" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/web3/%E8%B5%B0%E8%BF%9B%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%E7%9A%84%E4%B8%96%E7%95%8C.html#_4-2-继承调用-sol"><!---->4-2.继承调用.sol<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="4-3.合约地址的调用.sol" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/web3/%E8%B5%B0%E8%BF%9B%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%E7%9A%84%E4%B8%96%E7%95%8C.html#_4-3-合约地址的调用-sol"><!---->4-3.合约地址的调用.sol<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="4-4.call.sol" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/web3/%E8%B5%B0%E8%BF%9B%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%E7%9A%84%E4%B8%96%E7%95%8C.html#_4-4-call-sol"><!---->4-4.call.sol<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="4-5.staticcall.sol" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/web3/%E8%B5%B0%E8%BF%9B%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%E7%9A%84%E4%B8%96%E7%95%8C.html#_4-5-staticcall-sol"><!---->4-5.staticcall.sol<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="4-6.delegatecall.sol" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/web3/%E8%B5%B0%E8%BF%9B%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%E7%9A%84%E4%B8%96%E7%95%8C.html#_4-6-delegatecall-sol"><!---->4-6.delegatecall.sol<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a aria-label="5.approve.sol" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/web3/%E8%B5%B0%E8%BF%9B%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%E7%9A%84%E4%B8%96%E7%95%8C.html#_5-approve-sol"><!---->5.approve.sol<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="6.燃烧代币.sol" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/web3/%E8%B5%B0%E8%BF%9B%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%E7%9A%84%E4%B8%96%E7%95%8C.html#_6-燃烧代币-sol"><!---->6.燃烧代币.sol<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="7. 接收ETH receive和fallback.sol" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/web3/%E8%B5%B0%E8%BF%9B%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%E7%9A%84%E4%B8%96%E7%95%8C.html#_7-接收eth-receive和fallback-sol"><!---->7. 接收ETH receive和fallback.sol<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="8.发送eth.sol" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/web3/%E8%B5%B0%E8%BF%9B%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%E7%9A%84%E4%B8%96%E7%95%8C.html#_8-发送eth-sol"><!---->8.发送eth.sol<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="9.合约内部创建合约.sol" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/web3/%E8%B5%B0%E8%BF%9B%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%E7%9A%84%E4%B8%96%E7%95%8C.html#_9-合约内部创建合约-sol"><!---->9.合约内部创建合约.sol<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="10.Create2.sol" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/web3/%E8%B5%B0%E8%BF%9B%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%E7%9A%84%E4%B8%96%E7%95%8C.html#_10-create2-sol"><!---->10.Create2.sol<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="11. 删除合约.sol" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/web3/%E8%B5%B0%E8%BF%9B%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%E7%9A%84%E4%B8%96%E7%95%8C.html#_11-删除合约-sol"><!---->11. 删除合约.sol<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="12.ABI.sol" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/web3/%E8%B5%B0%E8%BF%9B%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%E7%9A%84%E4%B8%96%E7%95%8C.html#_12-abi-sol"><!---->12.ABI.sol<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="13.hash.sol" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/web3/%E8%B5%B0%E8%BF%9B%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%E7%9A%84%E4%B8%96%E7%95%8C.html#_13-hash-sol"><!---->13.hash.sol<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="14.函数选择器（selector）.sol" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/web3/%E8%B5%B0%E8%BF%9B%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%E7%9A%84%E4%B8%96%E7%95%8C.html#_14-函数选择器-selector-sol"><!---->14.函数选择器（selector）.sol<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="15.TryCatch.sol" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/web3/%E8%B5%B0%E8%BF%9B%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%E7%9A%84%E4%B8%96%E7%95%8C.html#_15-trycatch-sol"><!---->15.TryCatch.sol<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="16.assembly.sol" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/web3/%E8%B5%B0%E8%BF%9B%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%E7%9A%84%E4%B8%96%E7%95%8C.html#_16-assembly-sol"><!---->16.assembly.sol<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="17.calldata.sol" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/web3/%E8%B5%B0%E8%BF%9B%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%E7%9A%84%E4%B8%96%E7%95%8C.html#_17-calldata-sol"><!---->17.calldata.sol<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a aria-label="应用部分" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/web3/%E8%B5%B0%E8%BF%9B%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%E7%9A%84%E4%B8%96%E7%95%8C.html#应用部分"><!---->应用部分<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-label="红包合约.sol" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/web3/%E8%B5%B0%E8%BF%9B%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%E7%9A%84%E4%B8%96%E7%95%8C.html#红包合约-sol"><!---->红包合约.sol<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li></ul></li><li class="vp-sidebar-sub-header"><a aria-label="合约的两个重要网站" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/web3/%E8%B5%B0%E8%BF%9B%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%E7%9A%84%E4%B8%96%E7%95%8C.html#合约的两个重要网站"><!---->合约的两个重要网站<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a aria-label="ERC20.sol" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/web3/%E8%B5%B0%E8%BF%9B%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%E7%9A%84%E4%B8%96%E7%95%8C.html#erc20-sol"><!---->ERC20.sol<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a aria-label="合约IDE" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/web3/%E8%B5%B0%E8%BF%9B%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%E7%9A%84%E4%B8%96%E7%95%8C.html#合约ide"><!---->合约IDE<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a aria-label="查询合约地址是否开源" class="vp-link nav-link vp-sidebar-link vp-heading nav-link vp-sidebar-link vp-heading" href="/web3/%E8%B5%B0%E8%BF%9B%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%E7%9A%84%E4%B8%96%E7%95%8C.html#查询合约地址是否开源"><!---->查询合约地址是否开源<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul><!--]--></li><li><!--[--><a aria-label="truffle" class="vp-link nav-link vp-sidebar-link vp-sidebar-page nav-link vp-sidebar-link vp-sidebar-page" href="/web3/truffle.html"><!---->truffle<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li></ul><!--[--><!----><!--]--></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!--[--><!----><!--]--><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!---->走进智能合约的世界</h1><div class="page-info"><!----><!----><span class="page-date-info" aria-label="写作日期📅" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2023-11-18T16:53:13.000Z"></span><!----><span class="page-reading-time-info" aria-label="阅读时间⌛" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>大约 18 分钟</span><meta property="timeRequired" content="PT18M"></span><!----><!----></div><hr></div><div class="toc-place-holder"><aside id="toc"><!--[--><!----><!--]--><div class="toc-header">此页内容<button type="button" class="print-button" title="打印"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button></div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level1 toc-link level1" href="#走进智能合约的世界">走进智能合约的世界</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="#solidity学习网站">solidity学习网站</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="#solidity语法">solidity语法</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#基础部分">基础部分</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level4 toc-link level4" href="#_1-hello-solidity-sol">1.hello solidity.sol</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level4 toc-link level4" href="#_2-数据类型-sol">2.数据类型.sol</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level4 toc-link level4" href="#_3-状态变量-sol">3.状态变量.sol</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level4 toc-link level4" href="#_4-全局变量-sol">4.全局变量.sol</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level4 toc-link level4" href="#_5-函数和函数修饰符-sol">5.函数和函数修饰符.sol</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level4 toc-link level4" href="#_5-1-修饰符-sol">5-1.修饰符.sol</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level4 toc-link level4" href="#_6-数组-sol">6.数组.sol</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level4 toc-link level4" href="#_7-mapping-sol">7.mapping.sol</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level4 toc-link level4" href="#_8-自定义结构-sol">8.自定义结构.sol</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level4 toc-link level4" href="#_9-事物控制与异常-sol">9.事物控制与异常.sol</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level4 toc-link level4" href="#_10-自定义修饰符-sol">10.自定义修饰符.sol</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level4 toc-link level4" href="#_11-storage与memory-sol">11.storage与memory.sol</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level4 toc-link level4" href="#_12-pure和if等-sol">12.pure和if等.sol</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level4 toc-link level4" href="#_13-interface-sol">13.interface.sol</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level4 toc-link level4" href="#_14-payable-sol">14.payable.sol</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level4 toc-link level4" href="#_15-事件-sol">15.事件.sol</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level4 toc-link level4" href="#_16-other-sol">16.other.sol</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#提升部分">提升部分</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level4 toc-link level4" href="#_1-函数的重载-sol">1.函数的重载.sol</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level4 toc-link level4" href="#_2-库合约-sol">2.库合约.sol</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level4 toc-link level4" href="#_3-import-sol">3.import.sol</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level4 toc-link level4" href="#_4-调用合约">4.调用合约</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level5 toc-link level5" href="#yideng-sol">Yideng.sol</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level5 toc-link level5" href="#_4-1-new调用-sol">4-1.new调用.sol</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level5 toc-link level5" href="#_4-2-继承调用-sol">4-2.继承调用.sol</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level5 toc-link level5" href="#_4-3-合约地址的调用-sol">4-3.合约地址的调用.sol</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level5 toc-link level5" href="#_4-4-call-sol">4-4.call.sol</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level5 toc-link level5" href="#_4-5-staticcall-sol">4-5.staticcall.sol</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level5 toc-link level5" href="#_4-6-delegatecall-sol">4-6.delegatecall.sol</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level4 toc-link level4" href="#_5-approve-sol">5.approve.sol</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level4 toc-link level4" href="#_6-燃烧代币-sol">6.燃烧代币.sol</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level4 toc-link level4" href="#_7-接收eth-receive和fallback-sol">7. 接收ETH receive和fallback.sol</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level4 toc-link level4" href="#_8-发送eth-sol">8.发送eth.sol</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level4 toc-link level4" href="#_9-合约内部创建合约-sol">9.合约内部创建合约.sol</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level4 toc-link level4" href="#_10-create2-sol">10.Create2.sol</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level4 toc-link level4" href="#_11-删除合约-sol">11. 删除合约.sol</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level4 toc-link level4" href="#_12-abi-sol">12.ABI.sol</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level4 toc-link level4" href="#_13-hash-sol">13.hash.sol</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level4 toc-link level4" href="#_14-函数选择器-selector-sol">14.函数选择器（selector）.sol</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level4 toc-link level4" href="#_15-trycatch-sol">15.TryCatch.sol</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level4 toc-link level4" href="#_16-assembly-sol">16.assembly.sol</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level4 toc-link level4" href="#_17-calldata-sol">17.calldata.sol</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#应用部分">应用部分</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level4 toc-link level4" href="#红包合约-sol">红包合约.sol</a></li><!----><!--]--></ul></li><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="#合约的两个重要网站">合约的两个重要网站</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3 toc-link level3" href="#erc20-sol">ERC20.sol</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="#合约ide">合约IDE</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2 toc-link level2" href="#查询合约地址是否开源">查询合约地址是否开源</a></li><!----><!--]--></ul></li><!--]--></ul><div class="toc-marker" style="top:-1.7rem;"></div></div><!--[--><!----><!--]--></aside></div><!--[--><!----><!--]--><div class="theme-hope-content"><h1 id="走进智能合约的世界" tabindex="-1"><a class="header-anchor" href="#走进智能合约的世界" aria-hidden="true">#</a> 走进智能合约的世界</h1><h2 id="solidity学习网站" tabindex="-1"><a class="header-anchor" href="#solidity学习网站" aria-hidden="true">#</a> solidity学习网站</h2><ul><li>官网：https://www.wtf.academy/</li><li>github：https://github.com/AmazingAng/WTF-Solidity</li><li>ethers: https://github.com/WTFAcademy/WTF-Ethers</li></ul><h2 id="solidity语法" tabindex="-1"><a class="header-anchor" href="#solidity语法" aria-hidden="true">#</a> solidity语法</h2><h3 id="基础部分" tabindex="-1"><a class="header-anchor" href="#基础部分" aria-hidden="true">#</a> 基础部分</h3><p>类似前端的document</p><div class="language-solidity line-numbers-mode" data-ext="solidity"><pre class="language-solidity"><code><span class="token comment">// SPDX-License-Identifier: GPL-3.0</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>编译器的版本</p><div class="language-solidity line-numbers-mode" data-ext="solidity"><pre class="language-solidity"><code><span class="token keyword">pragma</span> <span class="token keyword">solidity</span> <span class="token operator">&gt;=</span><span class="token version number">0.7.0</span> <span class="token operator">&lt;</span><span class="token version number">0.9.0</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>查看本地编译器的版本</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>solcjs --version
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="_1-hello-solidity-sol" tabindex="-1"><a class="header-anchor" href="#_1-hello-solidity-sol" aria-hidden="true">#</a> 1.hello solidity.sol</h4><div class="language-solidity line-numbers-mode" data-ext="solidity"><pre class="language-solidity"><code><span class="token comment">// SPDX-License-Identifier: GPL-3.0  </span>
<span class="token keyword">pragma</span> <span class="token keyword">solidity</span> <span class="token operator">&gt;=</span><span class="token version number">0.7.0</span> <span class="token operator">&lt;</span><span class="token version number">0.9.0</span><span class="token punctuation">;</span> 
<span class="token keyword">import</span> <span class="token string">&quot;hardhat/console.sol&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">contract</span> <span class="token class-name">HelloWorld</span> <span class="token punctuation">{</span>
    <span class="token comment">// 状态，类似前端的变量</span>
    <span class="token builtin">string</span> <span class="token keyword">public</span> Msg<span class="token punctuation">;</span> 

    <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 不能输出中文</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Hello Solidity&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        Msg <span class="token operator">=</span> <span class="token string">&quot;Hello Solidity&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container tip"><p class="hint-container-title">提示</p><p>Hardhat对solidity做了扩充，比如console，另外，solidity也对合约进行审计。</p></div><h4 id="_2-数据类型-sol" tabindex="-1"><a class="header-anchor" href="#_2-数据类型-sol" aria-hidden="true">#</a> 2.数据类型.sol</h4><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>/**
 * 1.string utf-8编码的字符串 &quot;a&quot; == &quot;a&quot;
 * 2.bool
 * 3.uint 无符号整数 负数 uint256 2的8次幂 0-255
 * uint8，uint16，uint24……uint256，int8，int16，int24……int256，bytes1，bytes2，bytes3……bytes32，
 * 4.byte 字节类型 1个字节 0x1a
 * 5.bytes 字节数组
 * 6.int 有符号整数
 * 7.address 代表了用户地址
 * 8.payable 这个函数可以花钱 这个用户可以花他的钱
 * 9.常量 const
 * &lt;A&gt; as ... payable(msg.owner)
 */
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-状态变量-sol" tabindex="-1"><a class="header-anchor" href="#_3-状态变量-sol" aria-hidden="true">#</a> 3.状态变量.sol</h4><div class="language-solidity line-numbers-mode" data-ext="solidity"><pre class="language-solidity"><code><span class="token comment">// 1.状态变量</span>
<span class="token comment">// 1.1.存储状态变量</span>
<span class="token comment">// 1.2.内存状态变量</span>
<span class="token comment">// 1.3.常量状态变量</span>
<span class="token comment">// 1.4.视图状态变量</span>
<span class="token comment">// 1.5.公共状态变量</span>
<span class="token comment">// 1.6.私有状态变量</span>
<span class="token comment">// 1.7.内部状态变量</span>
<span class="token comment">// 1.8.外部状态变量</span>

<span class="token comment">// SPDX-License-Identifier: GPL-3.0</span>
<span class="token keyword">pragma</span> <span class="token keyword">solidity</span> <span class="token operator">&gt;=</span><span class="token version number">0.7.0</span> <span class="token operator">&lt;</span><span class="token version number">0.9.0</span><span class="token punctuation">;</span>

<span class="token keyword">contract</span> <span class="token class-name">hello</span> <span class="token punctuation">{</span>
    <span class="token builtin">string</span> <span class="token keyword">public</span> Msg<span class="token punctuation">;</span>
    <span class="token builtin">uint256</span> <span class="token keyword">private</span> age<span class="token punctuation">;</span>
    <span class="token builtin">uint256</span> <span class="token keyword">public</span> difficulty<span class="token punctuation">;</span>
    <span class="token builtin">bytes4</span> <span class="token keyword">constant</span> fid <span class="token operator">=</span> <span class="token number">0xfa913621</span><span class="token punctuation">;</span>

    <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        Msg <span class="token operator">=</span> <span class="token string">&quot;Hello Solitidy&quot;</span><span class="token punctuation">;</span>
        age <span class="token operator">=</span> <span class="token number">18</span><span class="token punctuation">;</span>
        difficulty <span class="token operator">=</span> block<span class="token punctuation">.</span>difficulty<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">function</span> <span class="token function">getDoubleAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token keyword">view</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token builtin">uint256</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token builtin">uint256</span> dage <span class="token operator">=</span> age <span class="token operator">*</span> <span class="token number">3</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> dage<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container tip"><p class="hint-container-title">提示</p><p>block是全局变量</p><p>函数中的view关键字只对当前的状态读取，不进行任何修改，即视图函数</p></div><h4 id="_4-全局变量-sol" tabindex="-1"><a class="header-anchor" href="#_4-全局变量-sol" aria-hidden="true">#</a> 4.全局变量.sol</h4><div class="language-solidity line-numbers-mode" data-ext="solidity"><pre class="language-solidity"><code><span class="token comment">// SPDX-License-Identifier: GPL-3.0</span>

<span class="token keyword">pragma</span> <span class="token keyword">solidity</span> <span class="token operator">&gt;=</span><span class="token version number">0.7.0</span> <span class="token operator">&lt;</span><span class="token version number">0.9.0</span><span class="token punctuation">;</span>

<span class="token keyword">contract</span> <span class="token class-name">HelloWorld</span> <span class="token punctuation">{</span>
    <span class="token builtin">address</span> <span class="token keyword">public</span> Msg<span class="token punctuation">;</span>
    <span class="token builtin">bytes</span> <span class="token keyword">public</span> Msg2<span class="token punctuation">;</span>

    <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        Msg <span class="token operator">=</span> block<span class="token punctuation">.</span>coinbase<span class="token punctuation">;</span>
        <span class="token comment">// - block.difficulty (uint):当前块的难度系数</span>
        <span class="token comment">// - block.gaslimit (uint):当前块gas的上限</span>
        <span class="token comment">// - block.number (uint):当前块编号</span>
        <span class="token comment">// - block.blockhash (function(uint) returns (bytes32)):函数，返回指定块的哈希值，已经被内建函数blockhash所代替</span>
        <span class="token comment">// - block.timestamp (uint):当前块的时间戳</span>
        <span class="token comment">// 用户和你之间的消息的传递</span>
        Msg2 <span class="token operator">=</span> msg<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
        <span class="token comment">// - msg.gas (uint):剩余的gas量</span>
        <span class="token comment">// - msg.sender (address):消息的发送方(调用者)</span>
        <span class="token comment">// - msg.sig (bytes4):calldata的前四个字节(即函数标识符)</span>
        <span class="token comment">// - msg.value (uint):所发送的消息中的Wei （以太坊激励体系内最小的虚拟数字货币单位）数量</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_5-函数和函数修饰符-sol" tabindex="-1"><a class="header-anchor" href="#_5-函数和函数修饰符-sol" aria-hidden="true">#</a> 5.函数和函数修饰符.sol</h4><div class="language-solidity line-numbers-mode" data-ext="solidity"><pre class="language-solidity"><code><span class="token comment">// function func_name(paramlist...) modifiers returns (returnlist...)</span>

<span class="token comment">// - public	最大的访问权限，子类可以继承、可以访问，当前类能访问</span>
<span class="token comment">// - private  只有该合约可以调用 仅限内部访问，子类不能继承、不能访问</span>
<span class="token comment">// - internal  内部函数 内部正常访问，外部无法访问。子类可以继承、可以访问，当前类可以访问</span>
<span class="token comment">// - external  外部函数。内部不能访问。子类可以继承、可以访问，当前类不能访问</span>

<span class="token comment">// - view 对状态变量只读，这里的状态变量还包含区块链的内建对象数据、时间戳等</span>
<span class="token comment">// - pure 既不修改，也不读取状态变量的值，纯函数</span>
<span class="token comment">// - const 合约不修改状态变量的值，但是可以读取状态变量的值</span>
<span class="token comment">// - payable 设计以太币的转移 （资金控制类的）</span>
<span class="token comment">// - 自定义修饰符 支持自定义修饰符号 自定义控制类</span>
<span class="token comment">// 顺序  public &lt; external &lt; internal &lt; private。</span>

<span class="token comment">// SPDX-License-Identifier: GPL-3.0</span>

<span class="token keyword">pragma</span> <span class="token keyword">solidity</span> <span class="token operator">&gt;=</span><span class="token version number">0.7.0</span> <span class="token operator">&lt;</span><span class="token version number">0.9.0</span><span class="token punctuation">;</span>

<span class="token keyword">contract</span> <span class="token class-name">func_demo</span> <span class="token punctuation">{</span>
    <span class="token comment">// for循环的写法</span>
    <span class="token keyword">function</span> <span class="token function">getSum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token keyword">pure</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token builtin">uint256</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token builtin">uint256</span> sum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token comment">//for循环</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token builtin">uint256</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">100</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            sum <span class="token operator">+=</span> i<span class="token punctuation">;</span> <span class="token comment">//累加求和</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> sum<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// while循环的写法</span>
    <span class="token keyword">function</span> <span class="token function">getSum2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token keyword">pure</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token builtin">uint256</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token builtin">uint256</span> sum <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token builtin">uint256</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token comment">//for循环</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;=</span> <span class="token number">100</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            sum <span class="token operator">+=</span> i<span class="token punctuation">;</span> <span class="token comment">//累加求和</span>
            i<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> sum<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_5-1-修饰符-sol" tabindex="-1"><a class="header-anchor" href="#_5-1-修饰符-sol" aria-hidden="true">#</a> 5-1.修饰符.sol</h4><div class="language-solidity line-numbers-mode" data-ext="solidity"><pre class="language-solidity"><code><span class="token comment">// SPDX-License-Identifier: GPL-3.0</span>

<span class="token keyword">pragma</span> <span class="token keyword">solidity</span> <span class="token operator">&gt;=</span><span class="token version number">0.7.0</span> <span class="token operator">&lt;</span><span class="token version number">0.9.0</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&quot;./libs/Test.sol&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">contract</span> <span class="token class-name">DoTest</span> <span class="token keyword">is</span> Test <span class="token punctuation">{</span>
    <span class="token builtin">uint256</span><span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">]</span> a<span class="token punctuation">;</span>
    <span class="token builtin">uint256</span> <span class="token keyword">public</span> xx<span class="token punctuation">;</span>

    <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        a<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">function</span> <span class="token function">test_1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">external</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token builtin">uint256</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        xx <span class="token operator">=</span> <span class="token function">test</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> xx<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">function</span> <span class="token function">test_2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token builtin">uint256</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        xx <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">test2</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &lt;-- use this.</span>
        <span class="token keyword">return</span> xx<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">function</span> <span class="token function">test_3</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">external</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token builtin">uint256</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        xx <span class="token operator">=</span> <span class="token function">test3</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> xx<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">function</span> <span class="token function">test_4</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">external</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token builtin">uint256</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        xx <span class="token operator">=</span> <span class="token function">test4</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &lt;-- compile error</span>
        <span class="token keyword">return</span> xx<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_6-数组-sol" tabindex="-1"><a class="header-anchor" href="#_6-数组-sol" aria-hidden="true">#</a> 6.数组.sol</h4><div class="language-solidity line-numbers-mode" data-ext="solidity"><pre class="language-solidity"><code><span class="token comment">// SPDX-License-Identifier: GPL-3.0</span>

<span class="token keyword">pragma</span> <span class="token keyword">solidity</span> <span class="token operator">&gt;=</span><span class="token version number">0.7.0</span> <span class="token operator">&lt;</span><span class="token version number">0.9.0</span><span class="token punctuation">;</span>

<span class="token keyword">contract</span> <span class="token class-name">array_demo</span> <span class="token punctuation">{</span>
    <span class="token comment">//定长数组 T[N]</span>
    <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token keyword">public</span> names<span class="token punctuation">;</span>

    <span class="token comment">//动态数组</span>
    <span class="token builtin">uint256</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token keyword">public</span> ages<span class="token punctuation">;</span>

    <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        names<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;yideng&quot;</span><span class="token punctuation">;</span>
        <span class="token comment">//定长数组不允许push</span>
        <span class="token comment">// names.push(&quot;yideng2&quot;);</span>

        <span class="token comment">//动态数组不允许不存在的下标</span>
        <span class="token comment">// ages[0] = 110;</span>
        ages<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">111</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">function</span> <span class="token function">setNames</span><span class="token punctuation">(</span><span class="token builtin">string</span> <span class="token keyword">memory</span> name<span class="token punctuation">,</span> <span class="token builtin">uint256</span> index<span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token punctuation">{</span>
        names<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">function</span> <span class="token function">getLength</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">external</span> <span class="token keyword">view</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token builtin">uint256</span><span class="token punctuation">,</span> <span class="token builtin">uint256</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>names<span class="token punctuation">.</span>length<span class="token punctuation">,</span> ages<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container tip"><p class="hint-container-title">提示</p><p>对于变长的数据必须写memory</p></div><h4 id="_7-mapping-sol" tabindex="-1"><a class="header-anchor" href="#_7-mapping-sol" aria-hidden="true">#</a> 7.mapping.sol</h4><div class="language-solidity line-numbers-mode" data-ext="solidity"><pre class="language-solidity"><code><span class="token comment">// SPDX-License-Identifier: GPL-3.0</span>

<span class="token keyword">pragma</span> <span class="token keyword">solidity</span> <span class="token operator">&gt;=</span><span class="token version number">0.7.0</span> <span class="token operator">&lt;</span><span class="token version number">0.9.0</span><span class="token punctuation">;</span>

<span class="token keyword">contract</span> <span class="token class-name">map_demo</span> <span class="token punctuation">{</span>
    <span class="token keyword">mapping</span><span class="token punctuation">(</span><span class="token builtin">address</span> <span class="token operator">=&gt;</span> <span class="token builtin">string</span><span class="token punctuation">)</span> addr_names<span class="token punctuation">;</span>

    <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//msg.sender部署合约的人 owner</span>
        addr_names<span class="token punctuation">[</span>msg<span class="token punctuation">.</span>sender<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;laoyuan&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">function</span> <span class="token function">setNames</span><span class="token punctuation">(</span><span class="token builtin">string</span> <span class="token keyword">memory</span> _name<span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token punctuation">{</span>
        addr_names<span class="token punctuation">[</span>msg<span class="token punctuation">.</span>sender<span class="token punctuation">]</span> <span class="token operator">=</span> _name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">function</span> <span class="token function">getNames</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token keyword">view</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token builtin">string</span> <span class="token keyword">memory</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> addr_names<span class="token punctuation">[</span>msg<span class="token punctuation">.</span>sender<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_8-自定义结构-sol" tabindex="-1"><a class="header-anchor" href="#_8-自定义结构-sol" aria-hidden="true">#</a> 8.自定义结构.sol</h4><div class="language-solidity line-numbers-mode" data-ext="solidity"><pre class="language-solidity"><code><span class="token comment">// SPDX-License-Identifier: GPL-3.0</span>

<span class="token keyword">pragma</span> <span class="token keyword">solidity</span> <span class="token operator">&gt;=</span><span class="token version number">0.7.0</span> <span class="token operator">&lt;</span><span class="token version number">0.9.0</span><span class="token punctuation">;</span>

<span class="token keyword">struct</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
    <span class="token builtin">string</span> name<span class="token punctuation">;</span>
    <span class="token builtin">uint8</span> age<span class="token punctuation">;</span>
    <span class="token builtin">string</span> sex<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">contract</span> <span class="token class-name">struct_demo</span> <span class="token punctuation">{</span>
    User user<span class="token punctuation">;</span>
    User<span class="token punctuation">[</span><span class="token punctuation">]</span> users<span class="token punctuation">;</span>

    <span class="token keyword">function</span> <span class="token function">setUser</span><span class="token punctuation">(</span>
        <span class="token builtin">string</span> <span class="token keyword">memory</span> _name<span class="token punctuation">,</span>
        <span class="token builtin">uint8</span> _age<span class="token punctuation">,</span>
        <span class="token builtin">string</span> <span class="token keyword">memory</span> _sex
    <span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token punctuation">{</span>
        <span class="token comment">// user.name = _name;</span>
        <span class="token comment">// user.age = _age;</span>
        <span class="token comment">// user.sex = _sex;</span>
        user <span class="token operator">=</span> <span class="token function">User</span><span class="token punctuation">(</span>_name<span class="token punctuation">,</span> _age<span class="token punctuation">,</span> _sex<span class="token punctuation">)</span><span class="token punctuation">;</span>
        users<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">function</span> <span class="token function">getUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token keyword">view</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span>User <span class="token keyword">memory</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> user<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">function</span> <span class="token function">findPerson</span><span class="token punctuation">(</span><span class="token builtin">uint256</span> _index<span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token keyword">view</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span>User <span class="token keyword">memory</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> users<span class="token punctuation">[</span>_index<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_9-事物控制与异常-sol" tabindex="-1"><a class="header-anchor" href="#_9-事物控制与异常-sol" aria-hidden="true">#</a> 9.事物控制与异常.sol</h4><div class="language-solidity line-numbers-mode" data-ext="solidity"><pre class="language-solidity"><code><span class="token comment">/**
 * 1.revert 事物回滚 会消耗gas
 * 2.error 消耗gas最低
    2-1 error既可以告知用户抛出异常的原因，又能省gas。
 * 3.assert 错误判断 会消耗光gas assert(bool,cond_expr);
    3-1 一般不对外 内部变量判断 pure函数 用于检测系统级别的错误 代码层面的错误
    函数结尾或者函数头部 入参和必要条件检测
 * 4.require(bool cond_expr, string msg); 退还gas
    4-1 跟用户打交道的 require(input_var&gt;100);
    4-2 合约掉合约 require(合约地址!=address(0));
 */</span>

<span class="token comment">// SPDX-License-Identifier: GPL-3.0</span>
<span class="token keyword">pragma</span> <span class="token keyword">solidity</span> <span class="token operator">&gt;=</span><span class="token version number">0.7.0</span> <span class="token operator">&lt;</span><span class="token version number">0.9.0</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&quot;hardhat/console.sol&quot;</span><span class="token punctuation">;</span>
error <span class="token function">TransferNotOwner</span><span class="token punctuation">(</span><span class="token builtin">uint256</span> count<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 自定义error</span>

<span class="token keyword">contract</span> <span class="token class-name">struct_demo</span> <span class="token punctuation">{</span>
    User user<span class="token punctuation">;</span>

    <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        user<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;laoyuan&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">function</span> <span class="token function">setUser</span><span class="token punctuation">(</span>
        <span class="token builtin">string</span> <span class="token keyword">memory</span> _name<span class="token punctuation">,</span>
        <span class="token builtin">uint8</span> _age<span class="token punctuation">,</span>
        <span class="token builtin">string</span> <span class="token keyword">memory</span> _sex
    <span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token punctuation">{</span>
        <span class="token comment">// 执行不了，得硬编码</span>
        <span class="token comment">// if(_name !== user.name){</span>
        <span class="token comment">//     user.name = _name;</span>
        <span class="token comment">// }</span>
        <span class="token comment">// require(</span>
        <span class="token comment">//     keccak256(abi.encodePacked(user.name)) !=</span>
        <span class="token comment">//         keccak256(abi.encodePacked(_name)),</span>
        <span class="token comment">//     &quot;user send name is not allowed&quot;</span>
        <span class="token comment">// );</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>
            <span class="token function">keccak256</span><span class="token punctuation">(</span>abi<span class="token punctuation">.</span><span class="token function">encodePacked</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">==</span>
            <span class="token function">keccak256</span><span class="token punctuation">(</span>abi<span class="token punctuation">.</span><span class="token function">encodePacked</span><span class="token punctuation">(</span>_name<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">revert</span> <span class="token function">TransferNotOwner</span><span class="token punctuation">(</span>_age<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// revert`sss`;</span>
        <span class="token punctuation">}</span>
        user<span class="token punctuation">.</span>name <span class="token operator">=</span> _name<span class="token punctuation">;</span>

        user<span class="token punctuation">.</span>age <span class="token operator">=</span> _age<span class="token punctuation">;</span>
        user<span class="token punctuation">.</span>sex <span class="token operator">=</span> _sex<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container tip"><p class="hint-container-title">提示</p><p>不能直接比较字符串，必须是sha256，在以太坊上使用的是keccak256</p></div><h4 id="_10-自定义修饰符-sol" tabindex="-1"><a class="header-anchor" href="#_10-自定义修饰符-sol" aria-hidden="true">#</a> 10.自定义修饰符.sol</h4><div class="language-solidity line-numbers-mode" data-ext="solidity"><pre class="language-solidity"><code><span class="token comment">// SPDX-License-Identifier: GPL-3.0</span>

<span class="token keyword">pragma</span> <span class="token keyword">solidity</span> <span class="token operator">&gt;=</span><span class="token version number">0.7.0</span> <span class="token operator">&lt;</span><span class="token version number">0.9.0</span><span class="token punctuation">;</span>

<span class="token keyword">contract</span> <span class="token class-name">modifier_demo</span> <span class="token punctuation">{</span>
    <span class="token builtin">address</span> <span class="token keyword">public</span> admin<span class="token punctuation">;</span>
    <span class="token builtin">uint256</span> <span class="token keyword">public</span> amount<span class="token punctuation">;</span>

    <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        admin <span class="token operator">=</span> msg<span class="token punctuation">.</span>sender<span class="token punctuation">;</span>
        amount <span class="token operator">=</span> <span class="token number">101</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">modifier</span> <span class="token function">onlyAdmin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">require</span><span class="token punctuation">(</span>msg<span class="token punctuation">.</span>sender <span class="token operator">==</span> admin<span class="token punctuation">,</span> <span class="token string">&quot;only admin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">_</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">function</span> <span class="token function">setCount</span><span class="token punctuation">(</span><span class="token builtin">uint256</span> _amount<span class="token punctuation">)</span> <span class="token keyword">public</span> onlyAdmin <span class="token punctuation">{</span>
        amount <span class="token operator">=</span> _amount<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container tip"><p class="hint-container-title">提示</p><p>modifier修饰符</p></div><h4 id="_11-storage与memory-sol" tabindex="-1"><a class="header-anchor" href="#_11-storage与memory-sol" aria-hidden="true">#</a> 11.storage与memory.sol</h4><div class="language-solidity line-numbers-mode" data-ext="solidity"><pre class="language-solidity"><code><span class="token comment">/**
    1.对于临时变量，编译器会自动选择memory(按值传递)或storage(引用址)。变长数据类型二选一
    2.如果返回数据类型长度是变长的 需要memory修饰一下，如string、byte、数组自定义结构的
    3.storage（引用址） c++指针
    4.memory修饰的临时变量相当于右值的一个拷贝，对其进行的修改不会影响到本尊。
 */</span>
<span class="token comment">// SPDX-License-Identifier: GPL-3.0</span>

<span class="token keyword">pragma</span> <span class="token keyword">solidity</span> <span class="token operator">&gt;=</span><span class="token version number">0.7.0</span> <span class="token operator">&lt;</span><span class="token version number">0.9.0</span><span class="token punctuation">;</span>

<span class="token keyword">struct</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
    <span class="token builtin">string</span> name<span class="token punctuation">;</span>
    <span class="token builtin">uint8</span> age<span class="token punctuation">;</span>
    <span class="token builtin">string</span> sex<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">contract</span> <span class="token class-name">storage_demo</span> <span class="token punctuation">{</span>
    User adminUser<span class="token punctuation">;</span>

    <span class="token keyword">function</span> <span class="token function">setUser</span><span class="token punctuation">(</span><span class="token builtin">string</span> <span class="token keyword">memory</span> _name<span class="token punctuation">,</span> <span class="token builtin">uint8</span> _age<span class="token punctuation">,</span> <span class="token builtin">string</span> <span class="token keyword">memory</span> _sex<span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token punctuation">{</span>
        adminUser<span class="token punctuation">.</span>name <span class="token operator">=</span> _name<span class="token punctuation">;</span>
        adminUser<span class="token punctuation">.</span>age <span class="token operator">=</span> _age<span class="token punctuation">;</span>
        adminUser<span class="token punctuation">.</span>sex <span class="token operator">=</span> _sex<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">function</span> <span class="token function">getUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token keyword">view</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span>User <span class="token keyword">memory</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> adminUser<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">function</span> <span class="token function">setAge1</span><span class="token punctuation">(</span><span class="token builtin">uint8</span> _age<span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token keyword">view</span> <span class="token punctuation">{</span>
        User <span class="token keyword">memory</span> user <span class="token operator">=</span> adminUser<span class="token punctuation">;</span>
        user<span class="token punctuation">.</span>age <span class="token operator">=</span> _age<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">function</span> <span class="token function">setAge2</span><span class="token punctuation">(</span><span class="token builtin">uint8</span> _age<span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token punctuation">{</span>
        User <span class="token keyword">storage</span> user <span class="token operator">=</span> adminUser<span class="token punctuation">;</span>
        user<span class="token punctuation">.</span>age <span class="token operator">=</span> _age<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_12-pure和if等-sol" tabindex="-1"><a class="header-anchor" href="#_12-pure和if等-sol" aria-hidden="true">#</a> 12.pure和if等.sol</h4><div class="language-solidity line-numbers-mode" data-ext="solidity"><pre class="language-solidity"><code><span class="token comment">// SPDX-License-Identifier: GPL-3.0</span>

<span class="token keyword">pragma</span> <span class="token keyword">solidity</span> <span class="token operator">&gt;=</span><span class="token version number">0.7.0</span> <span class="token operator">&lt;</span><span class="token version number">0.9.0</span><span class="token punctuation">;</span>

<span class="token keyword">contract</span> <span class="token class-name">random_demo</span> <span class="token punctuation">{</span>
    <span class="token keyword">function</span> <span class="token function">getRandom</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token keyword">view</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token builtin">uint256</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token builtin">bytes32</span> hashA <span class="token operator">=</span> <span class="token function">keccak256</span><span class="token punctuation">(</span>abi<span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span>block<span class="token punctuation">.</span>timestamp<span class="token punctuation">,</span> msg<span class="token punctuation">.</span>sender<span class="token punctuation">,</span> block<span class="token punctuation">.</span>number<span class="token punctuation">,</span> <span class="token string">&#39;yideng&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token builtin">uint256</span><span class="token punctuation">(</span>hashA<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">function</span> <span class="token function">isEqual</span><span class="token punctuation">(</span><span class="token builtin">string</span> <span class="token keyword">memory</span> a<span class="token punctuation">,</span> <span class="token builtin">string</span> <span class="token keyword">memory</span> b<span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token keyword">pure</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token builtin">bool</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 判断是不是空</span>
        <span class="token builtin">bytes</span> <span class="token keyword">memory</span> aa <span class="token operator">=</span> <span class="token builtin">bytes</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token builtin">bytes</span> <span class="token keyword">memory</span> bb <span class="token operator">=</span> <span class="token builtin">bytes</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>aa<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">||</span> bb<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>aa<span class="token punctuation">.</span>length <span class="token operator">!=</span> bb<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token builtin">uint256</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> aa<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>aa<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> bb<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container tip"><p class="hint-container-title">提示</p><p>if终止不了合约，如果要终止合约需要用到assert</p></div><h4 id="_13-interface-sol" tabindex="-1"><a class="header-anchor" href="#_13-interface-sol" aria-hidden="true">#</a> 13.interface.sol</h4><div class="language-solidity line-numbers-mode" data-ext="solidity"><pre class="language-solidity"><code><span class="token comment">// SPDX-License-Identifier: GPL-3.0</span>
<span class="token keyword">pragma</span> <span class="token keyword">solidity</span> <span class="token operator">&gt;=</span><span class="token version number">0.7.0</span> <span class="token operator">&lt;</span><span class="token version number">0.9.0</span><span class="token punctuation">;</span>

<span class="token keyword">interface</span> <span class="token class-name">animalEat</span> <span class="token punctuation">{</span>
    <span class="token keyword">function</span> <span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">external</span> <span class="token keyword">returns</span><span class="token punctuation">(</span><span class="token builtin">uint256</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">contract</span> <span class="token class-name">AA</span> <span class="token keyword">is</span> animalEat <span class="token punctuation">{</span>
    <span class="token keyword">function</span> <span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token keyword">pure</span> override <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token builtin">uint256</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_14-payable-sol" tabindex="-1"><a class="header-anchor" href="#_14-payable-sol" aria-hidden="true">#</a> 14.payable.sol</h4><div class="language-solidity line-numbers-mode" data-ext="solidity"><pre class="language-solidity"><code><span class="token comment">// SPDX-License-Identifier: GPL-3.0</span>
<span class="token keyword">pragma</span> <span class="token keyword">solidity</span> <span class="token operator">&gt;=</span><span class="token version number">0.7.0</span> <span class="token operator">&lt;</span><span class="token version number">0.9.0</span><span class="token punctuation">;</span>

<span class="token keyword">contract</span> <span class="token class-name">color_demo</span> <span class="token punctuation">{</span>
    <span class="token builtin">address</span> owner<span class="token punctuation">;</span>

    <span class="token keyword">function</span> <span class="token function">getBalance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token keyword">view</span> <span class="token keyword">returns</span><span class="token punctuation">(</span><span class="token builtin">uint256</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token builtin">address</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span>balance<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 部署合约的人</span>
        owner <span class="token operator">=</span> msg<span class="token punctuation">.</span>sender<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 存钱</span>
    <span class="token keyword">function</span> <span class="token function">deposit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token keyword">payable</span> <span class="token punctuation">{</span>
        <span class="token keyword">require</span><span class="token punctuation">(</span>msg<span class="token punctuation">.</span>value <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;must be greater than 0&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 取钱</span>
    <span class="token keyword">function</span> <span class="token function">withdraw</span><span class="token punctuation">(</span><span class="token builtin">uint256</span> amount<span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token keyword">payable</span> <span class="token punctuation">{</span>
        <span class="token comment">// 必须是本人</span>
        <span class="token keyword">require</span><span class="token punctuation">(</span>msg<span class="token punctuation">.</span>sender <span class="token operator">==</span> owner<span class="token punctuation">,</span> <span class="token string">&#39;only owner can withdraw&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 小于当前账户余额</span>
        <span class="token keyword">require</span><span class="token punctuation">(</span>amount <span class="token operator">&lt;=</span> <span class="token builtin">address</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span>balance<span class="token punctuation">,</span> <span class="token string">&#39;not enough balance&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 调用合约的人</span>
        <span class="token keyword">payable</span><span class="token punctuation">(</span>msg<span class="token punctuation">.</span>sender<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">transfer</span><span class="token punctuation">(</span>amount<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_15-事件-sol" tabindex="-1"><a class="header-anchor" href="#_15-事件-sol" aria-hidden="true">#</a> 15.事件.sol</h4><div class="language-solidity line-numbers-mode" data-ext="solidity"><pre class="language-solidity"><code><span class="token comment">// SPDX-License-Identifier: GPL-3.0</span>
<span class="token keyword">pragma</span> <span class="token keyword">solidity</span> <span class="token operator">&gt;=</span><span class="token version number">0.7.0</span> <span class="token operator">&lt;</span><span class="token version number">0.9.0</span><span class="token punctuation">;</span>

<span class="token keyword">contract</span> <span class="token class-name">Events</span> <span class="token punctuation">{</span>
    <span class="token keyword">mapping</span><span class="token punctuation">(</span><span class="token builtin">address</span> <span class="token operator">=&gt;</span> <span class="token builtin">uint256</span><span class="token punctuation">)</span> <span class="token keyword">public</span> _balances<span class="token punctuation">;</span>
    <span class="token comment">// EVM 日志的抽象 Ether.js交互</span>
    <span class="token comment">// 带有indexed属性的这个状态是存储在一个 topics</span>
    <span class="token comment">// 0 索引</span>
    <span class="token comment">// {</span>
    <span class="token comment">//      topics: [</span>
    <span class="token comment">//          0: 函数方法的签名</span>
    <span class="token comment">//          1: indexed</span>
    <span class="token comment">//          2: to</span>
    <span class="token comment">//          3: 最后indexed</span>
    <span class="token comment">//      ]</span>
    <span class="token comment">// }</span>

    <span class="token keyword">event</span> <span class="token function">Transfer</span><span class="token punctuation">(</span><span class="token builtin">address</span> <span class="token keyword">indexed</span> _form<span class="token punctuation">,</span> <span class="token builtin">address</span> <span class="token keyword">indexed</span> _to<span class="token punctuation">,</span> <span class="token builtin">uint256</span> _value<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">function</span> <span class="token function">_transfer</span><span class="token punctuation">(</span><span class="token builtin">address</span> <span class="token keyword">from</span><span class="token punctuation">,</span> <span class="token builtin">address</span> to<span class="token punctuation">,</span> <span class="token builtin">uint256</span> amount<span class="token punctuation">)</span> <span class="token keyword">external</span> <span class="token punctuation">{</span>
        <span class="token comment">// 转账地址转一些基础的代币</span>
        _balances<span class="token punctuation">[</span><span class="token keyword">from</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1000000</span><span class="token punctuation">;</span>
        _balances<span class="token punctuation">[</span><span class="token keyword">from</span><span class="token punctuation">]</span> <span class="token operator">-=</span> amount<span class="token punctuation">;</span>
        _balances<span class="token punctuation">[</span>to<span class="token punctuation">]</span> <span class="token operator">+=</span> amount<span class="token punctuation">;</span>

        <span class="token keyword">emit</span> <span class="token function">Transfer</span><span class="token punctuation">(</span><span class="token keyword">from</span><span class="token punctuation">,</span> to<span class="token punctuation">,</span> amount<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_16-other-sol" tabindex="-1"><a class="header-anchor" href="#_16-other-sol" aria-hidden="true">#</a> 16.other.sol</h4><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>/**
    1.Solidity是一个专为EVM虚拟机运行而设计的高级语言，它是一个静态的、面向对象的语言。
 */
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="提升部分" tabindex="-1"><a class="header-anchor" href="#提升部分" aria-hidden="true">#</a> 提升部分</h3><h4 id="_1-函数的重载-sol" tabindex="-1"><a class="header-anchor" href="#_1-函数的重载-sol" aria-hidden="true">#</a> 1.函数的重载.sol</h4><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>// SPDX-License-Identifier: GPL-3.0
pragma solidity &gt;=0.7.0 &lt;0.9.0;

contract hello {
    function saySomething() public pure returns (string memory) {
        return &#39;hello world&#39;;
    }

    function saySomething(string memory something) public pure returns (string memory) {
        return something;
    }
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-库合约-sol" tabindex="-1"><a class="header-anchor" href="#_2-库合约-sol" aria-hidden="true">#</a> 2.库合约.sol</h4><div class="language-solidity line-numbers-mode" data-ext="solidity"><pre class="language-solidity"><code><span class="token comment">// SPDX-License-Identifier: GPL-3.0</span>
<span class="token keyword">pragma</span> <span class="token keyword">solidity</span> <span class="token operator">&gt;=</span><span class="token version number">0.7.0</span> <span class="token operator">&lt;</span><span class="token version number">0.9.0</span><span class="token punctuation">;</span>

<span class="token comment">/**
    省GAS 好用的寒暑假的集合 lodash 大神的函数库
    1.不能存状态变量
    2.不能继承或被继承
    3.不能payable 不能接收eth
    4.不可以被销毁
 */</span>

<span class="token keyword">library</span> <span class="token class-name">Strings</span> <span class="token punctuation">{</span>
    <span class="token builtin">bytes16</span> <span class="token keyword">private</span> <span class="token keyword">constant</span> _HEX_SYMBOLS <span class="token operator">=</span> <span class="token string">&quot;0123456789abcdef&quot;</span><span class="token punctuation">;</span>

    <span class="token comment">/**
     * @dev Converts a `uint256` to its ASCII `string` decimal representation.
     */</span>
    <span class="token keyword">function</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token builtin">uint256</span> value<span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token keyword">pure</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token builtin">string</span> <span class="token keyword">memory</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// Inspired by OraclizeAPI&#39;s implementation - MIT licence</span>
        <span class="token comment">// https://github.com/oraclize/ethereum-api/blob/b42146b063c7d6ee1358846c198246239e9360e8/oraclizeAPI_0.4.25.sol</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token builtin">uint256</span> temp <span class="token operator">=</span> value<span class="token punctuation">;</span>
        <span class="token builtin">uint256</span> digits<span class="token punctuation">;</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span>temp <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            digits<span class="token operator">++</span><span class="token punctuation">;</span>
            temp <span class="token operator">/=</span> <span class="token number">10</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token builtin">bytes</span> <span class="token keyword">memory</span> buffer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">bytes</span><span class="token punctuation">(</span>digits<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span>value <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            digits <span class="token operator">-=</span> <span class="token number">1</span><span class="token punctuation">;</span>
            buffer<span class="token punctuation">[</span>digits<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token builtin">bytes1</span><span class="token punctuation">(</span><span class="token builtin">uint8</span><span class="token punctuation">(</span><span class="token number">48</span> <span class="token operator">+</span> <span class="token builtin">uint256</span><span class="token punctuation">(</span>value <span class="token operator">%</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            value <span class="token operator">/=</span> <span class="token number">10</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token builtin">string</span><span class="token punctuation">(</span>buffer<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * @dev Converts a `uint256` to its ASCII `string` hexadecimal representation.
     */</span>
    <span class="token keyword">function</span> <span class="token function">toHexString</span><span class="token punctuation">(</span><span class="token builtin">uint256</span> value<span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token keyword">pure</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token builtin">string</span> <span class="token keyword">memory</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token string">&quot;0x00&quot;</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token builtin">uint256</span> temp <span class="token operator">=</span> value<span class="token punctuation">;</span>
        <span class="token builtin">uint256</span> length <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span>temp <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            length<span class="token operator">++</span><span class="token punctuation">;</span>
            temp <span class="token operator">&gt;&gt;=</span> <span class="token number">8</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token function">toHexString</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> length<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * @dev Converts a `uint256` to its ASCII `string` hexadecimal representation with fixed length.
     */</span>
    <span class="token keyword">function</span> <span class="token function">toHexString</span><span class="token punctuation">(</span><span class="token builtin">uint256</span> value<span class="token punctuation">,</span> <span class="token builtin">uint256</span> length<span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token keyword">pure</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token builtin">string</span> <span class="token keyword">memory</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token builtin">bytes</span> <span class="token keyword">memory</span> buffer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">bytes</span><span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">*</span> length <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        buffer<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">;</span>
        buffer<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;x&quot;</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token builtin">uint256</span> i <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">*</span> length <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token operator">--</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            buffer<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> _HEX_SYMBOLS<span class="token punctuation">[</span>value <span class="token operator">&amp;</span> <span class="token number">0xf</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            value <span class="token operator">&gt;&gt;=</span> <span class="token number">4</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">require</span><span class="token punctuation">(</span>value <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;Strings: hex length insufficient&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token builtin">string</span><span class="token punctuation">(</span>buffer<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">contract</span> <span class="token class-name">hello</span> <span class="token punctuation">{</span>
    <span class="token keyword">using</span> <span class="token class-name">Strings</span> <span class="token keyword">for</span> <span class="token builtin">uint256</span><span class="token punctuation">;</span>
    <span class="token builtin">uint256</span> <span class="token keyword">public</span> num <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span>

    <span class="token keyword">function</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token keyword">view</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token builtin">string</span> <span class="token keyword">memory</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> num<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">function</span> <span class="token function">toHexString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token keyword">view</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token builtin">string</span> <span class="token keyword">memory</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> num<span class="token punctuation">.</span><span class="token function">toHexString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-import-sol" tabindex="-1"><a class="header-anchor" href="#_3-import-sol" aria-hidden="true">#</a> 3.import.sol</h4><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>// 引入node-modules
// import &quot;hardhat/console.sol&quot;;

// 通过网址引入
// import &#39;https://github.com/OpenZeppelin/openzeppelin-contracts/blob/master/contracts/utils/Address.sol&#39;;

// import {aa} from &#39;aa.sol&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_4-调用合约" tabindex="-1"><a class="header-anchor" href="#_4-调用合约" aria-hidden="true">#</a> 4.调用合约</h4><h5 id="yideng-sol" tabindex="-1"><a class="header-anchor" href="#yideng-sol" aria-hidden="true">#</a> Yideng.sol</h5><div class="language-solidity line-numbers-mode" data-ext="solidity"><pre class="language-solidity"><code><span class="token comment">// SPDX-License-Identifier: GPL-3.0</span>
<span class="token keyword">pragma</span> <span class="token keyword">solidity</span> <span class="token operator">&gt;=</span><span class="token version number">0.7.0</span> <span class="token operator">&lt;</span><span class="token version number">0.9.0</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&quot;hardhat/console.sol&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">contract</span> <span class="token class-name">Laoyuan</span> <span class="token punctuation">{</span>
    <span class="token keyword">event</span> <span class="token function">Log</span><span class="token punctuation">(</span><span class="token builtin">string</span> msg<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">function</span> <span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;1111&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">emit</span> <span class="token function">Log</span><span class="token punctuation">(</span><span class="token string">&quot;yideng&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_4-1-new调用-sol" tabindex="-1"><a class="header-anchor" href="#_4-1-new调用-sol" aria-hidden="true">#</a> 4-1.new调用.sol</h5><div class="language-solidity line-numbers-mode" data-ext="solidity"><pre class="language-solidity"><code><span class="token comment">// SPDX-License-Identifier: GPL-3.0</span>
<span class="token keyword">pragma</span> <span class="token keyword">solidity</span> <span class="token operator">&gt;=</span><span class="token version number">0.7.0</span> <span class="token operator">&lt;</span><span class="token version number">0.9.0</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Laoyuan <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;./Yideng.sol&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">contract</span> <span class="token class-name">Import</span> <span class="token punctuation">{</span>
    Laoyuan yd <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Laoyuan</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token punctuation">{</span>
        yd<span class="token punctuation">.</span><span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_4-2-继承调用-sol" tabindex="-1"><a class="header-anchor" href="#_4-2-继承调用-sol" aria-hidden="true">#</a> 4-2.继承调用.sol</h5><div class="language-solidity line-numbers-mode" data-ext="solidity"><pre class="language-solidity"><code><span class="token comment">// SPDX-License-Identifier: GPL-3.0</span>
<span class="token keyword">pragma</span> <span class="token keyword">solidity</span> <span class="token operator">&gt;=</span><span class="token version number">0.7.0</span> <span class="token operator">&lt;</span><span class="token version number">0.9.0</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&#39;./Yideng.sol&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">contract</span> <span class="token class-name">test</span> <span class="token keyword">is</span> Laoyuan <span class="token punctuation">{</span>
    <span class="token keyword">function</span> <span class="token function">callParentSuper</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token punctuation">{</span>
        super<span class="token punctuation">.</span><span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_4-3-合约地址的调用-sol" tabindex="-1"><a class="header-anchor" href="#_4-3-合约地址的调用-sol" aria-hidden="true">#</a> 4-3.合约地址的调用.sol</h5><div class="language-solidity line-numbers-mode" data-ext="solidity"><pre class="language-solidity"><code><span class="token comment">// SPDX-License-Identifier: GPL-3.0</span>
<span class="token keyword">pragma</span> <span class="token keyword">solidity</span> <span class="token operator">&gt;=</span><span class="token version number">0.7.0</span> <span class="token operator">&lt;</span><span class="token version number">0.9.0</span><span class="token punctuation">;</span>

<span class="token keyword">interface</span> <span class="token class-name">IYideng</span> <span class="token punctuation">{</span>
    <span class="token keyword">function</span> <span class="token function">setX</span><span class="token punctuation">(</span><span class="token builtin">uint256</span> x<span class="token punctuation">)</span> <span class="token keyword">external</span><span class="token punctuation">;</span>

    <span class="token keyword">function</span> <span class="token function">getX</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">external</span> <span class="token keyword">view</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token builtin">uint256</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">contract</span> <span class="token class-name">CallContract</span> <span class="token punctuation">{</span>
    <span class="token keyword">function</span> <span class="token function">callSetX</span><span class="token punctuation">(</span><span class="token builtin">address</span> _Address<span class="token punctuation">,</span> <span class="token builtin">uint256</span> x<span class="token punctuation">)</span> <span class="token keyword">external</span> <span class="token punctuation">{</span>
        IYideng yideng <span class="token operator">=</span> <span class="token function">IYideng</span><span class="token punctuation">(</span>_Address<span class="token punctuation">)</span><span class="token punctuation">;</span>
        yideng<span class="token punctuation">.</span><span class="token function">setX</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">function</span> <span class="token function">callGetX</span><span class="token punctuation">(</span>IYideng _Address<span class="token punctuation">)</span> <span class="token keyword">external</span> <span class="token keyword">view</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token builtin">uint256</span> x<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        x <span class="token operator">=</span> _Address<span class="token punctuation">.</span><span class="token function">getX</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_4-4-call-sol" tabindex="-1"><a class="header-anchor" href="#_4-4-call-sol" aria-hidden="true">#</a> 4-4.call.sol</h5><div class="language-solidity line-numbers-mode" data-ext="solidity"><pre class="language-solidity"><code><span class="token comment">// SPDX-License-Identifier: MIT</span>
<span class="token keyword">pragma</span> <span class="token keyword">solidity</span> <span class="token operator">^</span><span class="token version number">0.8.4</span><span class="token punctuation">;</span>

<span class="token keyword">contract</span> <span class="token class-name">Call</span> <span class="token punctuation">{</span>
    <span class="token comment">// (bool,data) = 目标合约地址.call{gas:xxx,value:钱}(二进制编码);</span>
    <span class="token comment">// 二进制编码 = abi.encodeWithSignature(&quot;setX(uint256)&quot;, 10,XX)</span>
    <span class="token comment">//  (bool,data) = 目标合约地址.call{value:发送数额, gas:gas数额}(abi.encodeWithSignature(&quot;setX(uint256)&quot;, 10,XX));</span>
    <span class="token keyword">event</span> <span class="token function">Response</span><span class="token punctuation">(</span><span class="token builtin">bool</span> success<span class="token punctuation">,</span> <span class="token builtin">bytes</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">function</span> <span class="token function">callSetX</span><span class="token punctuation">(</span><span class="token builtin">address</span> <span class="token keyword">payable</span> _addr<span class="token punctuation">,</span> <span class="token builtin">uint256</span> x<span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token punctuation">{</span>
        <span class="token comment">// (bool success, bytes memory data) = _addr.call{value: 0, gas: 1000000}(</span>
        <span class="token comment">//     abi.encodeWithSignature(&quot;setX(uint256)&quot;, x)</span>
        <span class="token comment">// );</span>
        <span class="token punctuation">(</span><span class="token builtin">bool</span> success<span class="token punctuation">,</span> <span class="token builtin">bytes</span> <span class="token keyword">memory</span> data<span class="token punctuation">)</span> <span class="token operator">=</span> _addr<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>
            abi<span class="token punctuation">.</span><span class="token function">encodeWithSignature</span><span class="token punctuation">(</span><span class="token string">&quot;setX(uint256)&quot;</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">require</span><span class="token punctuation">(</span>success<span class="token punctuation">,</span> <span class="token string">&quot;call failed&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">emit</span> <span class="token function">Response</span><span class="token punctuation">(</span>success<span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">function</span> <span class="token function">callGetX</span><span class="token punctuation">(</span><span class="token builtin">address</span> _addr<span class="token punctuation">)</span> <span class="token keyword">external</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token builtin">uint256</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token punctuation">(</span><span class="token builtin">bool</span> success<span class="token punctuation">,</span> <span class="token builtin">bytes</span> <span class="token keyword">memory</span> data<span class="token punctuation">)</span> <span class="token operator">=</span> _addr<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>
            abi<span class="token punctuation">.</span><span class="token function">encodePacked</span><span class="token punctuation">(</span><span class="token builtin">bytes4</span><span class="token punctuation">(</span><span class="token function">keccak256</span><span class="token punctuation">(</span><span class="token string">&quot;getX()&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">require</span><span class="token punctuation">(</span>success<span class="token punctuation">,</span> <span class="token string">&quot;call failed&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> abi<span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token builtin">uint256</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_4-5-staticcall-sol" tabindex="-1"><a class="header-anchor" href="#_4-5-staticcall-sol" aria-hidden="true">#</a> 4-5.staticcall.sol</h5><div class="language-solidity line-numbers-mode" data-ext="solidity"><pre class="language-solidity"><code><span class="token comment">// SPDX-License-Identifier: MIT</span>
<span class="token keyword">pragma</span> <span class="token keyword">solidity</span> <span class="token operator">^</span><span class="token version number">0.8.0</span><span class="token punctuation">;</span>

<span class="token keyword">contract</span> <span class="token class-name">SoldityTest</span> <span class="token punctuation">{</span>
    <span class="token keyword">function</span> <span class="token function">callHello</span><span class="token punctuation">(</span><span class="token builtin">address</span> addr<span class="token punctuation">)</span> <span class="token keyword">external</span> <span class="token keyword">view</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token builtin">string</span> <span class="token keyword">memory</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token punctuation">(</span><span class="token builtin">bool</span> success<span class="token punctuation">,</span> <span class="token builtin">bytes</span> <span class="token keyword">memory</span> data<span class="token punctuation">)</span> <span class="token operator">=</span> addr<span class="token punctuation">.</span><span class="token function">staticcall</span><span class="token punctuation">(</span>
            abi<span class="token punctuation">.</span><span class="token function">encodeWithSignature</span><span class="token punctuation">(</span><span class="token string">&quot;hello()&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">require</span><span class="token punctuation">(</span>success<span class="token punctuation">,</span> <span class="token string">&quot;call failed&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> abi<span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container tip"><p class="hint-container-title">提示</p><p>staticcall只能调用值，不能写</p><p>call中</p><pre><code>当前合约的msg.sender只能是你本人，
别的合约的msg.sender只能是合约地址
</code></pre><p>delegatecall 代理call</p><pre><code>当前合约的msg.sender只能是你本人，
别的合约的msg.sender也是你
</code></pre></div><h5 id="_4-6-delegatecall-sol" tabindex="-1"><a class="header-anchor" href="#_4-6-delegatecall-sol" aria-hidden="true">#</a> 4-6.delegatecall.sol</h5><div class="language-solidity line-numbers-mode" data-ext="solidity"><pre class="language-solidity"><code><span class="token comment">// SPDX-License-Identifier: MIT</span>
<span class="token keyword">pragma</span> <span class="token keyword">solidity</span> <span class="token operator">^</span><span class="token version number">0.8.4</span><span class="token punctuation">;</span>

<span class="token comment">// delegatecall和call类似，都是低级函数</span>
<span class="token comment">// call: B call C, 语境为 C (msg.sender = B, C中的状态变量受影响)</span>
<span class="token comment">// delegatecall: B delegatecall C, 语境为B (msg.sender = A, B中的状态变量受影响)</span>

<span class="token keyword">contract</span> <span class="token class-name">B</span> <span class="token punctuation">{</span>
    <span class="token builtin">uint256</span> <span class="token keyword">public</span> num<span class="token punctuation">;</span>
    <span class="token builtin">address</span> <span class="token keyword">public</span> sender<span class="token punctuation">;</span>
    <span class="token keyword">event</span> <span class="token function">Response</span><span class="token punctuation">(</span><span class="token builtin">bool</span> success<span class="token punctuation">,</span> <span class="token builtin">bytes</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 通过call来调用C的setVars()函数，将改变合约C里的状态变量</span>
    <span class="token keyword">function</span> <span class="token function">callSetVars</span><span class="token punctuation">(</span><span class="token builtin">address</span> _addr<span class="token punctuation">,</span> <span class="token builtin">uint256</span> _num<span class="token punctuation">)</span> <span class="token keyword">external</span> <span class="token keyword">payable</span> <span class="token punctuation">{</span>
        <span class="token punctuation">(</span><span class="token builtin">bool</span> success<span class="token punctuation">,</span> <span class="token builtin">bytes</span> <span class="token keyword">memory</span> data<span class="token punctuation">)</span> <span class="token operator">=</span> _addr<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>
            abi<span class="token punctuation">.</span><span class="token function">encodeWithSignature</span><span class="token punctuation">(</span><span class="token string">&quot;setVars(uint256)&quot;</span><span class="token punctuation">,</span> _num<span class="token punctuation">)</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">require</span><span class="token punctuation">(</span>success<span class="token punctuation">,</span> <span class="token string">&quot;call failed&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">emit</span> <span class="token function">Response</span><span class="token punctuation">(</span>success<span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 通过delegatecall来调用C的setVars()函数，将改变合约B里的状态变量</span>
    <span class="token keyword">function</span> <span class="token function">delegatecallSetVars</span><span class="token punctuation">(</span><span class="token builtin">address</span> _addr<span class="token punctuation">,</span> <span class="token builtin">uint256</span> _num<span class="token punctuation">)</span> <span class="token keyword">external</span> <span class="token keyword">payable</span> <span class="token punctuation">{</span>
        <span class="token punctuation">(</span><span class="token builtin">bool</span> success<span class="token punctuation">,</span> <span class="token builtin">bytes</span> <span class="token keyword">memory</span> data<span class="token punctuation">)</span> <span class="token operator">=</span> _addr<span class="token punctuation">.</span><span class="token function">delegatecall</span><span class="token punctuation">(</span>
            abi<span class="token punctuation">.</span><span class="token function">encodeWithSignature</span><span class="token punctuation">(</span><span class="token string">&quot;setVars(uint256)&quot;</span><span class="token punctuation">,</span> _num<span class="token punctuation">)</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">require</span><span class="token punctuation">(</span>success<span class="token punctuation">,</span> <span class="token string">&quot;call failed&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">emit</span> <span class="token function">Response</span><span class="token punctuation">(</span>success<span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container tip"><p class="hint-container-title">提示</p><p>delegatecall不能修改目标合约的值</p></div><h4 id="_5-approve-sol" tabindex="-1"><a class="header-anchor" href="#_5-approve-sol" aria-hidden="true">#</a> 5.approve.sol</h4><div class="language-solidity line-numbers-mode" data-ext="solidity"><pre class="language-solidity"><code><span class="token comment">// SPDX-License-Identifier: GPL-3.0</span>
<span class="token keyword">pragma</span> <span class="token keyword">solidity</span> <span class="token operator">&gt;=</span><span class="token version number">0.7.0</span> <span class="token operator">&lt;</span><span class="token version number">0.9.0</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token string">&quot;@openzeppelin/contract/token/ERC20/ERC20.sol&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">contract</span> <span class="token class-name">exampleContract</span> <span class="token punctuation">{</span>
    <span class="token keyword">mapping</span><span class="token punctuation">(</span><span class="token builtin">address</span> <span class="token operator">=&gt;</span> <span class="token builtin">uint256</span><span class="token punctuation">)</span> <span class="token keyword">public</span> balanceOf<span class="token punctuation">;</span>
    <span class="token keyword">mapping</span><span class="token punctuation">(</span><span class="token builtin">address</span> <span class="token operator">=&gt;</span> <span class="token keyword">mapping</span><span class="token punctuation">(</span><span class="token builtin">address</span> <span class="token operator">=&gt;</span> <span class="token builtin">uint256</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">public</span> allowance<span class="token punctuation">;</span>
    ERC20 USDTToken <span class="token operator">=</span> <span class="token function">ERC20</span><span class="token punctuation">(</span><span class="token string">&quot;0xdac17f958d2ee523a2206206994597c13d831ec7&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">function</span> <span class="token function">approve</span><span class="token punctuation">(</span><span class="token builtin">uint256</span> _amount<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        USDTToken<span class="token punctuation">.</span><span class="token function">approve</span><span class="token punctuation">(</span><span class="token builtin">address</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">,</span> _amount<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">function</span> <span class="token function">approve</span><span class="token punctuation">(</span><span class="token builtin">address</span> _spender<span class="token punctuation">,</span> <span class="token builtin">uint256</span> _value<span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token builtin">bool</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        allowance<span class="token punctuation">[</span>msg<span class="token punctuation">.</span>sender<span class="token punctuation">]</span><span class="token punctuation">[</span>_spender<span class="token punctuation">]</span> <span class="token operator">=</span> _value<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container tip"><p class="hint-container-title">提示</p><p>approve是一个规则，当你买东西时需要把你的余额授权给平台。 注意：小心某些平台会把余额填满，别人会把钱全部转走。</p></div><h4 id="_6-燃烧代币-sol" tabindex="-1"><a class="header-anchor" href="#_6-燃烧代币-sol" aria-hidden="true">#</a> 6.燃烧代币.sol</h4><div class="language-solidity line-numbers-mode" data-ext="solidity"><pre class="language-solidity"><code><span class="token comment">// SPDX-License-Identifier: GPL-3.0</span>
<span class="token keyword">pragma</span> <span class="token keyword">solidity</span> <span class="token operator">&gt;=</span><span class="token version number">0.7.0</span> <span class="token operator">&lt;</span><span class="token version number">0.9.0</span><span class="token punctuation">;</span>

<span class="token keyword">contract</span> <span class="token class-name">USDTContract</span> <span class="token punctuation">{</span>
    <span class="token builtin">uint256</span> <span class="token keyword">public</span> totalSupply<span class="token punctuation">;</span> <span class="token comment">// 发行量</span>
    <span class="token keyword">mapping</span><span class="token punctuation">(</span><span class="token builtin">address</span> <span class="token operator">=&gt;</span> <span class="token builtin">uint256</span><span class="token punctuation">)</span> <span class="token keyword">public</span> balanceOf<span class="token punctuation">;</span>
    <span class="token keyword">event</span> <span class="token function">Burn</span><span class="token punctuation">(</span><span class="token builtin">address</span> <span class="token keyword">indexed</span> <span class="token keyword">from</span><span class="token punctuation">,</span> <span class="token builtin">uint256</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 正如其名, 这个是烧币的.. ,用于把创建者的 token 烧掉</span>
    <span class="token keyword">function</span> <span class="token function">burn</span><span class="token punctuation">(</span><span class="token builtin">uint256</span> _value<span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token builtin">bool</span> success<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">require</span><span class="token punctuation">(</span>balanceOf<span class="token punctuation">[</span>msg<span class="token punctuation">.</span>sender<span class="token punctuation">]</span> <span class="token operator">&gt;=</span> _value<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 必须要有这么多</span>
        balanceOf<span class="token punctuation">[</span>msg<span class="token punctuation">.</span>sender<span class="token punctuation">]</span> <span class="token operator">-=</span> _value<span class="token punctuation">;</span>
        totalSupply <span class="token operator">-=</span> _value<span class="token punctuation">;</span>
        <span class="token keyword">emit</span> <span class="token function">Burn</span><span class="token punctuation">(</span>msg<span class="token punctuation">.</span>sender<span class="token punctuation">,</span> _value<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">function</span> <span class="token function">burn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token keyword">view</span> <span class="token punctuation">{</span>
        <span class="token comment">//合约转账 黑洞合约</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_7-接收eth-receive和fallback-sol" tabindex="-1"><a class="header-anchor" href="#_7-接收eth-receive和fallback-sol" aria-hidden="true">#</a> 7. 接收ETH receive和fallback.sol</h4><div class="language-solidity line-numbers-mode" data-ext="solidity"><pre class="language-solidity"><code><span class="token comment">/* 
    触发fallback() 还是 receive()?
           接收ETH
              |
         msg.data是空？
            /  \
          是    否
          /      \
receive()存在?   fallback()
        / \
      是  否
    /     \
receive()  fallback   
*/</span>

<span class="token comment">// SPDX-License-Identifier: GPL-3.0</span>
<span class="token keyword">pragma</span> <span class="token keyword">solidity</span> <span class="token operator">&gt;=</span><span class="token version number">0.7.0</span> <span class="token operator">&lt;</span><span class="token version number">0.9.0</span><span class="token punctuation">;</span>

<span class="token keyword">contract</span> <span class="token class-name">Fallback</span> <span class="token punctuation">{</span>
    <span class="token keyword">event</span> <span class="token function">receivedCalled</span><span class="token punctuation">(</span><span class="token builtin">address</span> Sender<span class="token punctuation">,</span> <span class="token builtin">uint256</span> Vallue<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">event</span> <span class="token function">fallbackCalled</span><span class="token punctuation">(</span><span class="token builtin">address</span> Sender<span class="token punctuation">,</span> <span class="token builtin">uint256</span> Value<span class="token punctuation">,</span> <span class="token builtin">bytes</span> Data<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">receive</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">external</span> <span class="token keyword">payable</span> <span class="token punctuation">{</span>
        <span class="token comment">//不要去写 业务太复杂执行时间长</span>
        <span class="token keyword">emit</span> <span class="token function">receivedCalled</span><span class="token punctuation">(</span>msg<span class="token punctuation">.</span>sender<span class="token punctuation">,</span> msg<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">fallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">external</span> <span class="token keyword">payable</span> <span class="token punctuation">{</span>
        <span class="token keyword">emit</span> <span class="token function">fallbackCalled</span><span class="token punctuation">(</span>msg<span class="token punctuation">.</span>sender<span class="token punctuation">,</span> msg<span class="token punctuation">.</span>value<span class="token punctuation">,</span> msg<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_8-发送eth-sol" tabindex="-1"><a class="header-anchor" href="#_8-发送eth-sol" aria-hidden="true">#</a> 8.发送eth.sol</h4><div class="language-solidity line-numbers-mode" data-ext="solidity"><pre class="language-solidity"><code><span class="token comment">// SPDX-License-Identifier: MIT</span>
<span class="token keyword">pragma</span> <span class="token keyword">solidity</span> <span class="token operator">^</span><span class="token version number">0.8.4</span><span class="token punctuation">;</span>

<span class="token comment">// 3种方法发送ETH</span>
<span class="token comment">// transfer: 2300 gas, revert</span>
<span class="token comment">// send: 2300 gas, return bool</span>
<span class="token comment">// call: all gas, return (bool, data)</span>

<span class="token keyword">contract</span> <span class="token class-name">SendETH</span> <span class="token punctuation">{</span>
    <span class="token comment">// 构造函数，payable使得部署的时候可以转eth进去</span>
    <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">payable</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token comment">// receive方法，接收eth时被触发</span>
    <span class="token function">receive</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">external</span> <span class="token keyword">payable</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token comment">// 用transfer()发送ETH</span>
    <span class="token keyword">function</span> <span class="token function">transferETH</span><span class="token punctuation">(</span><span class="token builtin">address</span> <span class="token keyword">payable</span> _to<span class="token punctuation">,</span> <span class="token builtin">uint256</span> amount<span class="token punctuation">)</span> <span class="token keyword">external</span> <span class="token keyword">payable</span> <span class="token punctuation">{</span>
        _to<span class="token punctuation">.</span><span class="token function">transfer</span><span class="token punctuation">(</span>amount<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// send()发送ETH</span>
    <span class="token keyword">function</span> <span class="token function">sendETH</span><span class="token punctuation">(</span><span class="token builtin">address</span> <span class="token keyword">payable</span> _to<span class="token punctuation">,</span> <span class="token builtin">uint256</span> amount<span class="token punctuation">)</span> <span class="token keyword">external</span> <span class="token keyword">payable</span> <span class="token punctuation">{</span>
        <span class="token comment">// 处理下send的返回值，如果失败，revert交易并发送error</span>
        <span class="token builtin">bool</span> success <span class="token operator">=</span> _to<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>amount<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>success<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">revert</span> <span class="token function">SendFailed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// call()发送ETH</span>
    <span class="token keyword">function</span> <span class="token function">callETH</span><span class="token punctuation">(</span><span class="token builtin">address</span> <span class="token keyword">payable</span> _to<span class="token punctuation">,</span> <span class="token builtin">uint256</span> amount<span class="token punctuation">)</span> <span class="token keyword">external</span> <span class="token keyword">payable</span> <span class="token punctuation">{</span>
        <span class="token comment">// 处理下call的返回值，如果失败，revert交易并发送error</span>
        <span class="token punctuation">(</span><span class="token builtin">bool</span> success<span class="token punctuation">,</span> <span class="token punctuation">)</span> <span class="token operator">=</span> _to<span class="token punctuation">.</span>call<span class="token punctuation">{</span>value<span class="token punctuation">:</span> amount<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>success<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">revert</span> <span class="token function">CallFailed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">contract</span> <span class="token class-name">ReceiveETH</span> <span class="token punctuation">{</span>
    <span class="token comment">// 收到eth事件，记录amount和gas</span>
    <span class="token keyword">event</span> <span class="token function">Log</span><span class="token punctuation">(</span><span class="token builtin">uint256</span> amount<span class="token punctuation">,</span> <span class="token builtin">uint256</span> gas<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// receive方法，接收eth时被触发</span>
    <span class="token function">receive</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">external</span> <span class="token keyword">payable</span> <span class="token punctuation">{</span>
        <span class="token keyword">emit</span> <span class="token function">Log</span><span class="token punctuation">(</span>msg<span class="token punctuation">.</span>value<span class="token punctuation">,</span> <span class="token function">gasleft</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 返回合约ETH余额</span>
    <span class="token keyword">function</span> <span class="token function">getBalance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token keyword">view</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token builtin">uint256</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token builtin">address</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span>balance<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_9-合约内部创建合约-sol" tabindex="-1"><a class="header-anchor" href="#_9-合约内部创建合约-sol" aria-hidden="true">#</a> 9.合约内部创建合约.sol</h4><div class="language-solidity line-numbers-mode" data-ext="solidity"><pre class="language-solidity"><code><span class="token comment">// SPDX-License-Identifier: MIT</span>
<span class="token keyword">pragma</span> <span class="token keyword">solidity</span> <span class="token operator">^</span><span class="token version number">0.8.4</span><span class="token punctuation">;</span>

<span class="token keyword">contract</span> <span class="token class-name">Pair</span> <span class="token punctuation">{</span>
    <span class="token builtin">address</span> <span class="token keyword">public</span> factory<span class="token punctuation">;</span>
    <span class="token builtin">address</span> <span class="token keyword">public</span> token0<span class="token punctuation">;</span>
    <span class="token builtin">address</span> <span class="token keyword">public</span> token1<span class="token punctuation">;</span>

    <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">payable</span> <span class="token punctuation">{</span>
        factory <span class="token operator">=</span> msg<span class="token punctuation">.</span>sender<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">function</span> <span class="token function">initialize</span><span class="token punctuation">(</span><span class="token builtin">address</span> _tokenA<span class="token punctuation">,</span> <span class="token builtin">address</span> _tokenB<span class="token punctuation">)</span> <span class="token keyword">external</span> <span class="token punctuation">{</span>
        <span class="token keyword">require</span><span class="token punctuation">(</span>msg<span class="token punctuation">.</span>sender <span class="token operator">==</span> factory<span class="token punctuation">,</span> <span class="token string">&quot;UniswapV2: FORBIDDEN&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// sufficient check</span>
        token0 <span class="token operator">=</span> _tokenA<span class="token punctuation">;</span>
        token1 <span class="token operator">=</span> _tokenB<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">contract</span> <span class="token class-name">PairFactory</span> <span class="token punctuation">{</span>
    <span class="token comment">//通过token0和token1的地址，获取到对应的pair合约地址</span>
    <span class="token keyword">mapping</span><span class="token punctuation">(</span><span class="token builtin">address</span> <span class="token operator">=&gt;</span> <span class="token keyword">mapping</span><span class="token punctuation">(</span><span class="token builtin">address</span> <span class="token operator">=&gt;</span> <span class="token builtin">address</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">public</span> getPair<span class="token punctuation">;</span>
    <span class="token comment">//所有的pair合约地址</span>
    <span class="token builtin">address</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token keyword">public</span> allPairs<span class="token punctuation">;</span>

    <span class="token keyword">function</span> <span class="token function">createPair</span><span class="token punctuation">(</span>
        <span class="token builtin">address</span> _tokenA<span class="token punctuation">,</span>
        <span class="token builtin">address</span> _tokenB
    <span class="token punctuation">)</span> <span class="token keyword">external</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token builtin">address</span> pairAddress<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        Pair pair <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Pair</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        pair<span class="token punctuation">.</span><span class="token function">initialize</span><span class="token punctuation">(</span>_tokenA<span class="token punctuation">,</span> _tokenB<span class="token punctuation">)</span><span class="token punctuation">;</span>
        pairAddress <span class="token operator">=</span> <span class="token builtin">address</span><span class="token punctuation">(</span>pair<span class="token punctuation">)</span><span class="token punctuation">;</span>
        allPairs<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>pairAddress<span class="token punctuation">)</span><span class="token punctuation">;</span>
        getPair<span class="token punctuation">[</span>_tokenA<span class="token punctuation">]</span><span class="token punctuation">[</span>_tokenB<span class="token punctuation">]</span> <span class="token operator">=</span> pairAddress<span class="token punctuation">;</span>
        getPair<span class="token punctuation">[</span>_tokenB<span class="token punctuation">]</span><span class="token punctuation">[</span>_tokenA<span class="token punctuation">]</span> <span class="token operator">=</span> pairAddress<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_10-create2-sol" tabindex="-1"><a class="header-anchor" href="#_10-create2-sol" aria-hidden="true">#</a> 10.Create2.sol</h4><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>todo
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="_11-删除合约-sol" tabindex="-1"><a class="header-anchor" href="#_11-删除合约-sol" aria-hidden="true">#</a> 11. 删除合约.sol</h4><div class="language-solidity line-numbers-mode" data-ext="solidity"><pre class="language-solidity"><code><span class="token comment">// SPDX-License-Identifier: MIT</span>
<span class="token keyword">pragma</span> <span class="token keyword">solidity</span> <span class="token operator">^</span><span class="token version number">0.8.4</span><span class="token punctuation">;</span>

<span class="token keyword">contract</span> <span class="token class-name">DeleteContract</span> <span class="token punctuation">{</span>
    <span class="token comment">//析构函数，销毁合约时被调用</span>
    <span class="token keyword">function</span> <span class="token function">deleteContract</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">external</span> <span class="token punctuation">{</span>
        <span class="token comment">// 调用selfdestruct销毁合约，并把剩余的ETH转给msg.sender</span>
        <span class="token keyword">selfdestruct</span><span class="token punctuation">(</span><span class="token keyword">payable</span><span class="token punctuation">(</span>msg<span class="token punctuation">.</span>sender<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_12-abi-sol" tabindex="-1"><a class="header-anchor" href="#_12-abi-sol" aria-hidden="true">#</a> 12.ABI.sol</h4><div class="language-solidity line-numbers-mode" data-ext="solidity"><pre class="language-solidity"><code><span class="token comment">//Application Binary Interface</span>
<span class="token comment">//ABI是一种JSON格式的接口描述语言，用于描述智能合约中的公共方法和事件</span>

<span class="token comment">/**
 * 1.ABI编码 abi.encode, abi.encodePacked, abi.encodeWithSignature, abi.encodeWithSelector
 * 2.ABI解码 abi.decode
 */</span>

<span class="token comment">// 数据是必须编码成字节码才能和智能合约交互！！！！</span>

<span class="token comment">//0xd6abfc7b000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000043078414100000000000000000000000000000000000000000000000000000000</span>

<span class="token keyword">contract</span> <span class="token class-name">ABIEncode</span> <span class="token punctuation">{</span>
    <span class="token builtin">uint256</span> x <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
    <span class="token builtin">address</span> addr <span class="token operator">=</span> <span class="token number">0x7A58c0Be72BE218B41C608b7Fe7C5bB630736C71</span><span class="token punctuation">;</span>
    <span class="token builtin">string</span> name <span class="token operator">=</span> <span class="token string">&quot;0xAA&quot;</span><span class="token punctuation">;</span>
    <span class="token builtin">uint256</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> array <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token keyword">function</span> <span class="token function">encode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token keyword">view</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token builtin">bytes</span> <span class="token keyword">memory</span> result<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        result <span class="token operator">=</span> abi<span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> addr<span class="token punctuation">,</span> name<span class="token punctuation">,</span> array<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 一堆东西打包到一块</span>
    <span class="token keyword">function</span> <span class="token function">encodePacked</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token keyword">view</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token builtin">bytes</span> <span class="token keyword">memory</span> result<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        result <span class="token operator">=</span> abi<span class="token punctuation">.</span><span class="token function">encodePacked</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> addr<span class="token punctuation">,</span> name<span class="token punctuation">,</span> array<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 对函数签名进行打包</span>
    <span class="token keyword">function</span> <span class="token function">encodeWithSignature</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token keyword">view</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token builtin">bytes</span> <span class="token keyword">memory</span> result<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        result <span class="token operator">=</span> abi<span class="token punctuation">.</span><span class="token function">encodeWithSignature</span><span class="token punctuation">(</span>
            <span class="token string">&quot;foo(uint256,address,string,uint256[2])&quot;</span><span class="token punctuation">,</span>
            x<span class="token punctuation">,</span>
            addr<span class="token punctuation">,</span>
            name<span class="token punctuation">,</span>
            array
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">function</span> <span class="token function">encodeWithSelector</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token keyword">view</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token builtin">bytes</span> <span class="token keyword">memory</span> result<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        result <span class="token operator">=</span> abi<span class="token punctuation">.</span><span class="token function">encodeWithSelector</span><span class="token punctuation">(</span>
            <span class="token comment">//函数选择器</span>
            <span class="token comment">//0xd6abfc7b000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000043078414100000000000000000000000000000000000000000000000000000000</span>
            <span class="token builtin">bytes4</span><span class="token punctuation">(</span><span class="token function">keccak256</span><span class="token punctuation">(</span><span class="token string">&quot;foo(uint256,address,string,uint256[2])&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            x<span class="token punctuation">,</span>
            addr<span class="token punctuation">,</span>
            name<span class="token punctuation">,</span>
            array
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_13-hash-sol" tabindex="-1"><a class="header-anchor" href="#_13-hash-sol" aria-hidden="true">#</a> 13.hash.sol</h4><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>// SPDX-License-Identifier: MIT
pragma solidity ^0.8.4;

contract Hash {
    function hash(
        uint256 _num,
        string memory _string,
        address _addr
    ) public pure returns (bytes32) {
        //sha256
        return keccak256(abi.encodePacked(_num, _string, _addr));
    }
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_14-函数选择器-selector-sol" tabindex="-1"><a class="header-anchor" href="#_14-函数选择器-selector-sol" aria-hidden="true">#</a> 14.函数选择器（selector）.sol</h4><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>// SPDX-License-Identifier: MIT
pragma solidity ^0.8.4;

contract Selector {
    event Log(bytes data);

    // 输入参数 to: 0x2c44b726ADF1963cA47Af88B284C06f30380fC78
    function mint(address /*to*/) external {
        emit Log(msg.data);
    }

    // 输出selector
    // &quot;mint(address)&quot;： 0x6a627842
    function mintSelector() external pure returns (bytes4 mSelector) {
        return bytes4(keccak256(&quot;mint(address)&quot;));
    }

    // 使用selector来调用函数
    function callWithSignature() external returns (bool, bytes memory) {
        // 只需要利用`abi.encodeWithSelector`将`mint`函数的`selector`和参数打包编码
        (bool success, bytes memory data) = address(this).call(
            abi.encodeWithSelector(
                0x6a627842,
                &quot;0x2c44b726ADF1963cA47Af88B284C06f30380fC78&quot;
            )
        );
        return (success, data);
    }
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_15-trycatch-sol" tabindex="-1"><a class="header-anchor" href="#_15-trycatch-sol" aria-hidden="true">#</a> 15.TryCatch.sol</h4><div class="language-solidity line-numbers-mode" data-ext="solidity"><pre class="language-solidity"><code><span class="token comment">// SPDX-License-Identifier: MIT</span>
<span class="token keyword">pragma</span> <span class="token keyword">solidity</span> <span class="token operator">^</span><span class="token version number">0.8.4</span><span class="token punctuation">;</span>

<span class="token keyword">contract</span> <span class="token class-name">OnlyEven</span><span class="token punctuation">{</span>
    <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token builtin">uint</span> a<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">require</span><span class="token punctuation">(</span>a <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;invalid number&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">assert</span><span class="token punctuation">(</span>a <span class="token operator">!=</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">function</span> <span class="token function">onlyEven</span><span class="token punctuation">(</span><span class="token builtin">uint256</span> b<span class="token punctuation">)</span> <span class="token keyword">external</span> <span class="token keyword">pure</span> <span class="token keyword">returns</span><span class="token punctuation">(</span><span class="token builtin">bool</span> success<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">// 输入奇数时revert</span>
        <span class="token keyword">require</span><span class="token punctuation">(</span>b <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;Ups! Reverting&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        success <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">contract</span> <span class="token class-name">TryCatch</span> <span class="token punctuation">{</span>
    <span class="token comment">// 成功event</span>
    <span class="token keyword">event</span> <span class="token function">SuccessEvent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 失败event</span>
    <span class="token keyword">event</span> <span class="token function">CatchEvent</span><span class="token punctuation">(</span><span class="token builtin">string</span> message<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">event</span> <span class="token function">CatchByte</span><span class="token punctuation">(</span><span class="token builtin">bytes</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 声明OnlyEven合约变量</span>
    OnlyEven even<span class="token punctuation">;</span>

    <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        even <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">OnlyEven</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment">// 在external call中使用try-catch</span>
    <span class="token comment">// execute(0)会成功并释放`SuccessEvent`</span>
    <span class="token comment">// execute(1)会失败并释放`CatchEvent`</span>
    <span class="token keyword">function</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token builtin">uint</span> amount<span class="token punctuation">)</span> <span class="token keyword">external</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token builtin">bool</span> success<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        try even<span class="token punctuation">.</span><span class="token function">onlyEven</span><span class="token punctuation">(</span>amount<span class="token punctuation">)</span> <span class="token keyword">returns</span><span class="token punctuation">(</span><span class="token builtin">bool</span> _success<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">// call成功的情况下</span>
            <span class="token keyword">emit</span> <span class="token function">SuccessEvent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> _success<span class="token punctuation">;</span>
        <span class="token punctuation">}</span> catch <span class="token function">Error</span><span class="token punctuation">(</span><span class="token builtin">string</span> <span class="token keyword">memory</span> reason<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">// call不成功的情况下</span>
            <span class="token keyword">emit</span> <span class="token function">CatchEvent</span><span class="token punctuation">(</span>reason<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 在创建新合约中使用try-catch （合约创建被视为external call）</span>
    <span class="token comment">// executeNew(0)会失败并释放`CatchEvent`</span>
    <span class="token comment">// executeNew(1)会失败并释放`CatchByte`</span>
    <span class="token comment">// executeNew(2)会成功并释放`SuccessEvent`</span>
    <span class="token keyword">function</span> <span class="token function">executeNew</span><span class="token punctuation">(</span><span class="token builtin">uint</span> a<span class="token punctuation">)</span> <span class="token keyword">external</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token builtin">bool</span> success<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        try <span class="token keyword">new</span> <span class="token class-name">OnlyEven</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token keyword">returns</span><span class="token punctuation">(</span>OnlyEven _even<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">// call成功的情况下</span>
            <span class="token keyword">emit</span> <span class="token function">SuccessEvent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            success <span class="token operator">=</span> _even<span class="token punctuation">.</span><span class="token function">onlyEven</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> catch <span class="token function">Error</span><span class="token punctuation">(</span><span class="token builtin">string</span> <span class="token keyword">memory</span> reason<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// catch revert(&quot;reasonString&quot;) 和 require(false, &quot;reasonString&quot;)</span>
            <span class="token keyword">emit</span> <span class="token function">CatchEvent</span><span class="token punctuation">(</span>reason<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> catch <span class="token punctuation">(</span><span class="token builtin">bytes</span> <span class="token keyword">memory</span> reason<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// catch失败的assert assert失败的错误类型是Panic(uint256) 不是Error(string)类型 故会进入该分支</span>
            <span class="token keyword">emit</span> <span class="token function">CatchByte</span><span class="token punctuation">(</span>reason<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_16-assembly-sol" tabindex="-1"><a class="header-anchor" href="#_16-assembly-sol" aria-hidden="true">#</a> 16.assembly.sol</h4><div class="language-solidity line-numbers-mode" data-ext="solidity"><pre class="language-solidity"><code><span class="token comment">// SPDX-License-Identifier: MIT</span>
<span class="token keyword">pragma</span> <span class="token keyword">solidity</span> <span class="token operator">^</span><span class="token version number">0.8.4</span><span class="token punctuation">;</span>

<span class="token keyword">contract</span> <span class="token class-name">Hello</span> <span class="token punctuation">{</span>
    <span class="token keyword">function</span> <span class="token function">addAssembly</span><span class="token punctuation">(</span><span class="token builtin">uint256</span> x<span class="token punctuation">,</span> <span class="token builtin">uint256</span> y<span class="token punctuation">)</span> <span class="token keyword">external</span> <span class="token keyword">pure</span> <span class="token punctuation">{</span>
        <span class="token keyword">assembly</span> <span class="token punctuation">{</span>
            <span class="token keyword">let</span> result <span class="token operator">:=</span> <span class="token function">add</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span>
            <span class="token function">mstore</span><span class="token punctuation">(</span><span class="token number">0x00</span><span class="token punctuation">,</span> result<span class="token punctuation">)</span>
            <span class="token keyword">return</span><span class="token punctuation">(</span><span class="token number">0x00</span><span class="token punctuation">,</span> <span class="token number">0x20</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_17-calldata-sol" tabindex="-1"><a class="header-anchor" href="#_17-calldata-sol" aria-hidden="true">#</a> 17.calldata.sol</h4><div class="language-solidity line-numbers-mode" data-ext="solidity"><pre class="language-solidity"><code><span class="token comment">// SPDX-License-Identifier: MIT</span>
<span class="token keyword">pragma</span> <span class="token keyword">solidity</span> <span class="token operator">^</span><span class="token version number">0.8.4</span><span class="token punctuation">;</span>

<span class="token comment">//EVM不能修calldata</span>
<span class="token keyword">contract</span> <span class="token class-name">C</span> <span class="token punctuation">{</span>
    <span class="token builtin">address</span><span class="token punctuation">[</span><span class="token punctuation">]</span> owners<span class="token punctuation">;</span>

    <span class="token keyword">function</span> <span class="token function">addOwners</span><span class="token punctuation">(</span><span class="token builtin">address</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token keyword">calldata</span> _newOwners<span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token punctuation">{</span>
        <span class="token comment">// We pass _newOwners on as a calldata array.</span>
        <span class="token function">checkUnique</span><span class="token punctuation">(</span>_newOwners<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token builtin">uint256</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> _newOwners<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
            owners<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>_newOwners<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/// 内部函数可以遍历 calldata 的数组，而不用再复制到内存了。</span>

    <span class="token keyword">function</span> <span class="token function">checkUnique</span><span class="token punctuation">(</span><span class="token builtin">address</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token keyword">calldata</span> _newOwners<span class="token punctuation">)</span> <span class="token keyword">internal</span> <span class="token keyword">pure</span> <span class="token punctuation">{</span>
        <span class="token comment">// address[] memory a = _newOwners;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token builtin">uint256</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> _newOwners<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token builtin">uint256</span> j <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> _newOwners<span class="token punctuation">.</span>length<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>
                <span class="token keyword">require</span><span class="token punctuation">(</span>_newOwners<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">!=</span> _newOwners<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="应用部分" tabindex="-1"><a class="header-anchor" href="#应用部分" aria-hidden="true">#</a> 应用部分</h3><h4 id="红包合约-sol" tabindex="-1"><a class="header-anchor" href="#红包合约-sol" aria-hidden="true">#</a> 红包合约.sol</h4><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>// SPDX-License-Identifier: GPL-3.0
pragma solidity &gt;=0.7.0 &lt;0.9.0;

contract RedPacket {
    //定义一个发红包的主体
    address payable public yideng;
    //红包的金额
    uint256 public totalAmount;
    //红包的数量
    uint256 public count;
    //是否是等额红包
    bool isEqual;
    //临时变量
    uint256 public temp = 0;

    // 是否被领取过了
    mapping(address =&gt; bool) isGrabbed;

    constructor(uint256 c, bool _isEqual) payable {
        require(msg.value &gt; 0, &quot;amount must be greater than 0&quot;);
        //部署合约的人就是发红包的人
        yideng = payable(msg.sender);
        count = c;
        isEqual = _isEqual;
        totalAmount = msg.value;
    }

    //展示一下钱包的余额
    function getBalance() public view returns (uint256) {
        return address(this).balance;
    }

    function grabRedPacket() public {
        require(count &gt; 0, &quot;red packet is empty&quot;);
        require(totalAmount &gt; 0, &quot;red packet is empty&quot;);
        require(!isGrabbed[msg.sender], &quot;you have grabbed red packet&quot;);
        //已经抢过这个红包了
        isGrabbed[msg.sender] = true;

        if (count == 1) {
            temp = totalAmount / 1000000000000000000;
            payable(msg.sender).transfer(totalAmount);
        } else {
            if (isEqual) {
                uint256 amount = totalAmount / count;
                totalAmount -= amount;
                payable(msg.sender).transfer(amount);
            } else {
                //如果不是一个等额红包 计算一个10以内的随机数
                uint256 random = (uint256(
                    keccak256(
                        abi.encodePacked(
                            msg.sender,
                            yideng,
                            count,
                            totalAmount,
                            block.timestamp
                        )
                    )
                ) % 8) + 1;
                uint256 amount = (totalAmount * random) / 10;
                payable(msg.sender).transfer(amount);
                totalAmount -= amount;
            }
        }
        count--;
    }
}
#### 数据上链.js
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>// 字符串转16进制 function str2hex(str) { if (str === &#39;&#39;) { return &#39;&#39;; } var arr = []; arr.push(&#39;0x&#39;); for (var i = 0; i &lt; str.length; i++) { arr.push(str.charCodeAt(i).toString(16)); } return arr.join(&#39;&#39;); }</p><p>// console.log(str2hex(&#39;test data&#39;));</p><p>// 16进制转字符串 function hex2str(hex) { var trimedStr = hex.trim(); var rawStr = trimedStr.substr(0, 2).toLowerCase() === &#39;0x&#39; ? trimedStr.substr(2) : trimedStr; var len = rawStr.length; if (len % 2 !== 0) { alert(&#39;Illegal Format ASCII Code!&#39;); return &#39;&#39;; } var curCharCode; var resultStr = []; for (var i = 0; i &lt; len; i = i + 2) { curCharCode = parseInt(rawStr.substr(i, 2), 16); resultStr.push(String.fromCharCode(curCharCode)); } return resultStr.join(&#39;&#39;); }</p><p>console.log(hex2str(&#39;0x746573742064617461&#39;));</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code></code></pre><div class="line-numbers" aria-hidden="true"></div></div><h2 id="合约的两个重要网站" tabindex="-1"><a class="header-anchor" href="#合约的两个重要网站" aria-hidden="true">#</a> 合约的两个重要网站</h2><ul><li><p>chainlink 预言机 Chainlink Nodes 去中心化节点</p></li><li><p>thegraph 访问全球的区块链数据 可对链上数据进行查询 https://thegraph.com/docs/zh/</p></li><li><p>https://www.openzeppelin.com/</p></li><li><p>安装：npm openzeppelin 查看 ERC20.sol</p></li></ul><h3 id="erc20-sol" tabindex="-1"><a class="header-anchor" href="#erc20-sol" aria-hidden="true">#</a> ERC20.sol</h3><div class="language-solidity line-numbers-mode" data-ext="solidity"><pre class="language-solidity"><code><span class="token comment">// SPDX-License-Identifier: MIT</span>
<span class="token comment">// OpenZeppelin Contracts (last updated v5.0.0) (token/ERC20/IERC20.sol)</span>

<span class="token keyword">pragma</span> <span class="token keyword">solidity</span> <span class="token operator">&gt;=</span><span class="token version number">0.7.0</span> <span class="token operator">&lt;</span><span class="token version number">0.9.0</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * @dev ERC20合约接口
 */</span>
<span class="token keyword">interface</span> <span class="token class-name">IERC20</span> <span class="token punctuation">{</span>
    <span class="token comment">/**
     * 释放条件：当value单位的货币从账户from转移到账户to时，触发此事件
     * Note that `value` may be zero.
     */</span>
    <span class="token keyword">event</span> <span class="token function">Transfer</span><span class="token punctuation">(</span><span class="token builtin">address</span> <span class="token keyword">indexed</span> <span class="token keyword">from</span><span class="token punctuation">,</span> <span class="token builtin">address</span> <span class="token keyword">indexed</span> to<span class="token punctuation">,</span> <span class="token builtin">uint256</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">/**
     * 释放条件：当owner账户授权spender账户可以从自己的账户转移value单位的货币时，触发此事件
     */</span>
    <span class="token keyword">event</span> <span class="token function">Approval</span><span class="token punctuation">(</span>
        <span class="token builtin">address</span> <span class="token keyword">indexed</span> owner<span class="token punctuation">,</span>
        <span class="token builtin">address</span> <span class="token keyword">indexed</span> spender<span class="token punctuation">,</span>
        <span class="token builtin">uint256</span> value
    <span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">/**
     * @dev 返回代币的总供给 一共mint 1万个 yideng token
     */</span>
    <span class="token keyword">function</span> <span class="token function">totalSupply</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">external</span> <span class="token keyword">view</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token builtin">uint256</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">/**
     * @dev 返回账户accout所持有的代币数量 余额
     */</span>
    <span class="token keyword">function</span> <span class="token function">balanceOf</span><span class="token punctuation">(</span><span class="token builtin">address</span> account<span class="token punctuation">)</span> <span class="token keyword">external</span> <span class="token keyword">view</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token builtin">uint256</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">/**
     * @dev 转账amount个代币到账户to
     * 如果成功了 返回true
     */</span>
    <span class="token keyword">function</span> <span class="token function">transfer</span><span class="token punctuation">(</span><span class="token builtin">address</span> to<span class="token punctuation">,</span> <span class="token builtin">uint256</span> value<span class="token punctuation">)</span> <span class="token keyword">external</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token builtin">bool</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">/**
     * @dev 返回账户owner授权给spender账户可以从自己的账户转移的代币数量
     */</span>
    <span class="token keyword">function</span> <span class="token function">allowance</span><span class="token punctuation">(</span>
        <span class="token builtin">address</span> owner<span class="token punctuation">,</span>
        <span class="token builtin">address</span> spender
    <span class="token punctuation">)</span> <span class="token keyword">external</span> <span class="token keyword">view</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token builtin">uint256</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">/**
     * @dev 返回owner账户授权给spender账户额度 默认是0
     * 当approve或transferFrom被调用时候 allowance发生变化
     */</span>
    <span class="token keyword">function</span> <span class="token function">approve</span><span class="token punctuation">(</span><span class="token builtin">address</span> spender<span class="token punctuation">,</span> <span class="token builtin">uint256</span> value<span class="token punctuation">)</span> <span class="token keyword">external</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token builtin">bool</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">/**
     * @dev 通过授权机制 从from账户到to账户转移amount个代币 转移的这部分钱会扣除allowance
     */</span>
    <span class="token keyword">function</span> <span class="token function">transferFrom</span><span class="token punctuation">(</span>
        <span class="token builtin">address</span> <span class="token keyword">from</span><span class="token punctuation">,</span>
        <span class="token builtin">address</span> to<span class="token punctuation">,</span>
        <span class="token builtin">uint256</span> value
    <span class="token punctuation">)</span> <span class="token keyword">external</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token builtin">bool</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="合约ide" tabindex="-1"><a class="header-anchor" href="#合约ide" aria-hidden="true">#</a> 合约IDE</h2><p>https://remix.ethereum.org/</p><p>compilation details可以帮助我们生成abi <img src="/assets/image/compilation-details.png" alt="An image" loading="lazy"></p><p>deploy 浅蓝色按钮不要钱 黄色按钮花gas 红色按钮花账户中的钱和gas</p><h2 id="查询合约地址是否开源" tabindex="-1"><a class="header-anchor" href="#查询合约地址是否开源" aria-hidden="true">#</a> 查询合约地址是否开源</h2><p>https://etherscan.io/</p></div><!--[--><!----><!--]--><footer class="page-meta"><!----><div class="meta-item git-info"><div class="update-time"><span class="label">上次编辑于: </span><!----></div><div class="contributors"><span class="label">贡献者: </span><!--[--><!--[--><span class="contributor" title="email: 18435185808@sina.cn">18435185808@sina.cn</span><!--]--><!--]--></div></div></footer><nav class="vp-page-nav"><a aria-label="web3" class="vp-link nav-link active prev nav-link active prev" href="/web3/"><div class="hint"><span class="arrow start"></span>上一页</div><div class="link"><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span>web3</div></a><a aria-label="truffle" class="vp-link nav-link next nav-link next" href="/web3/truffle.html"><div class="hint">下一页<span class="arrow end"></span></div><div class="link">truffle<!----></div></a></nav><!----><!--[--><!----><!--]--><!--]--></main><!--]--><footer class="vp-footer-wrapper"><div class="vp-footer">路虽远行则将至，事虽难做则必成</div><!----></footer></div><!--]--><!----><!----><!--]--></div>
    <script type="module" src="/assets/app-cbOojWoE.js" defer></script>
  </body>
</html>
